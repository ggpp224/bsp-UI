dhtmlx=function(d){for(var c in d){dhtmlx[c]=d[c]}return dhtmlx};dhtmlx.extend_api=function(f,e,h){var g=window[f];if(g){window[f]=function(b){if(b&&typeof b=="object"&&!b.tagName){var k=g.apply(this,e._init?e._init(b):arguments),d;for(d in dhtmlx){if(e[d]){this[e[d]](dhtmlx[d])}}for(d in b){if(e[d]){this[e[d]](b[d])}else{d.indexOf("on")==0&&this.attachEvent(d,b[d])}}}else{k=g.apply(this,arguments)}e._patch&&e._patch(this);return k||this},window[f].prototype=g.prototype,h&&dhtmlXHeir(window[f].prototype,h)}};dhtmlxAjax={get:function(e,d){var f=new dtmlXMLLoaderObject(!0);f.async=arguments.length<3;f.waitCall=d;f.loadXML(e);return f},post:function(f,e,h){var g=new dtmlXMLLoaderObject(!0);g.async=arguments.length<4;g.waitCall=h;g.loadXML(f,!0,e);return g},getSync:function(b){return this.get(b,null,!0)},postSync:function(d,c){return this.post(d,c,null,!0)}};function dtmlXMLLoaderObject(f,e,h,g){this.xmlDoc="";this.async=typeof h!="undefined"?h:!0;this.onloadAction=f||null;this.mainObject=e||null;this.waitCall=null;this.rSeed=g||!1;return this}dtmlXMLLoaderObject.count=0;dtmlXMLLoaderObject.prototype.waitLoadFunction=function(d){var c=!0;return this.check=function(){if(d&&d.onloadAction!=null&&(!d.xmlDoc.readyState||d.xmlDoc.readyState==4)&&c){c=!1;dtmlXMLLoaderObject.count++;if(typeof d.onloadAction=="function"){d.onloadAction(d.mainObject,null,null,null,d)}if(d.waitCall){d.waitCall.call(this,d),d.waitCall=null}}}};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(f,e){if(this.xmlDoc.responseXML){var h=this.xmlDoc.responseXML.getElementsByTagName(f);h.length==0&&f.indexOf(":")!=-1&&(h=this.xmlDoc.responseXML.getElementsByTagName(f.split(":")[1]));var g=h[0]}else{g=this.xmlDoc.documentElement}if(g){return this._retry=!1,g}if(!this._retry){return this._retry=!0,e=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(f,e)}dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(e,d){if(_isIE){this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(e)}else{var f=new DOMParser;this.xmlDoc=f.parseFromString(e,"text/xml")}if(!d){if(this.onloadAction){this.onloadAction(this.mainObject,null,null,null,this)}if(this.waitCall){this.waitCall(),this.waitCall=null}}};dtmlXMLLoaderObject.prototype.loadXML=function(f,e,h,g){this.rSeed&&(f+=(f.indexOf("?")!=-1?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=f;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(this.async){this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)}this.xmlDoc.open(e?"POST":"GET",f,this.async);g?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(h);this.async||(new this.waitLoadFunction(this))()};dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(f){for(var e={},h=0;h<f.attributes.length;h++){e[f.attributes[h].name]=f.attributes[h].value}e._tagvalue=f.firstChild?f.firstChild.nodeValue:"";for(h=0;h<f.childNodes.length;h++){var g=f.childNodes[h].tagName;g&&(e[g]||(e[g]=[]),e[g].push(this.xmlNodeToJSON(f.childNodes[h])))}return e};function callerFunction(d,c){return this.handler=function(a){if(!a){a=window.event}d(a,c);return !0}}function getAbsoluteLeft(b){return getOffset(b).left}function getAbsoluteTop(b){return getOffset(b).top}function getOffsetSum(e){for(var d=0,f=0;e;){d+=parseInt(e.offsetTop),f+=parseInt(e.offsetLeft),e=e.offsetParent}return{top:d,left:f}}function getOffsetRect(v){var u=v.getBoundingClientRect(),s=document.body,r=document.documentElement,q=window.pageYOffset||r.scrollTop||s.scrollTop,o=window.pageXOffset||r.scrollLeft||s.scrollLeft,p=r.clientTop||s.clientTop||0,n=r.clientLeft||s.clientLeft||0,m=u.top+q-p,l=u.left+o-n;return{top:Math.round(m),left:Math.round(l)}}function getOffset(b){return b.getBoundingClientRect?getOffsetRect(b):getOffsetSum(b)}function convertStringToBoolean(b){typeof b=="string"&&(b=b.toLowerCase());switch(b){case"1":case"true":case"yes":case"y":case 1:case !0:return !0;default:return !1}}function getUrlSymbol(b){return b.indexOf("?")!=-1?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(b){b.onmousedown=null;b.dragStarter=null;b.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(d,c){d.onmousedown=this.preCreateDragCopy;d.dragStarter=c;this.addDragLanding(d,c)};dhtmlDragAndDropObject.prototype.addDragLanding=function(d,c){d.dragLanding=c};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(b){if(!((b||window.event)&&(b||event).button==2)){if(window.dhtmlDragAndDrop.waitDrag){return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1}window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(b);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();b&&b.preventDefault&&b.preventDefault();return !1}};dhtmlDragAndDropObject.prototype.callDrag=function(g){if(!g){g=window.event}dragger=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,g);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return !1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(g,!0)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var f=dragger.gldragNode;if(dragger.gldragNode.old){f=dragger.gldragNode.old}f.parentNode.removeChild(f);var l=dragger.dragNode.pWindow;f.pWindow&&f.pWindow.dhtmlDragAndDrop.lastLanding&&f.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(f.pWindow.dhtmlDragAndDrop.lastLanding);if(_isIE){var k=document.createElement("Div");k.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=k.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(!0)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);l.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=g.clientX+15+(dragger.fx?dragger.fx*-1:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=g.clientY+3+(dragger.fy?dragger.fy*-1:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var h=g.srcElement?g.srcElement:g.target;dragger.checkLanding(h,g)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(g){if(window.name){for(var f=parent.frames[window.name].frameElement.offsetParent,l=0,k=0;f;){l+=f.offsetLeft,k+=f.offsetTop,f=f.offsetParent}if(parent.dhtmlDragAndDrop){var h=parent.dhtmlDragAndDrop.calculateFramePosition(1);l+=h.split("_")[0]*1;k+=h.split("_")[1]*1}if(g){return l+"_"+k}else{this.fx=l}this.fy=k}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(d,c){d&&d.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=d,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,c.clientX,c.clientY,c),this.lastLanding_scr=_isIE?c.srcElement:c.target):d&&d.tagName!="BODY"?this.checkLanding(d.parentNode,c):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,c.clientX,c.clientY,c),this.lastLanding=0,this._onNotFound&&this._onNotFound())};dhtmlDragAndDropObject.prototype.stopDrag=function(e,d){dragger=window.dhtmlDragAndDrop;if(!d){dragger.stopFrameRoute();var f=dragger.lastLanding;dragger.lastLanding=null;f&&f.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,f,_isIE?event.srcElement:e.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(f){f&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++){try{window.frames[e]!=f&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(h){}}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=f&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(g){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(g,f){if(g){window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=g.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=g.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=g.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=g.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&f&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition()}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=g&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(l){}for(var k=0;k<window.frames.length;k++){try{window.frames[k]!=g&&window.frames[k].dhtmlDragAndDrop&&window.frames[k].dhtmlDragAndDrop.initFrameRoute(window,!g||f?1:0)}catch(h){}}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;navigator.userAgent.indexOf("Macintosh")!=-1&&(_isMacOS=!0);navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0);if(navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){if(_isIE=!0,(navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1)&&document.compatMode!="BackCompat"){_isIE=8}}else{_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}dtmlXMLLoaderObject.prototype.doXPath=function(s,r,q,p){if(_isKHTML||!_isIE&&!window.XPathResult){return this.doXPathOpera(s,r)}if(_isIE){return r||(r=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),r||dhtmlxError.throwError("LoadXML","Incorrect XML",[r||this.xmlDoc,this.mainObject]),q!=null&&r.setProperty("SelectionNamespaces","xmlns:xsl='"+q+"'"),p=="single"?r.selectSingleNode(s):r.selectNodes(s)||[]}else{var o=r;r||(r=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);r||dhtmlxError.throwError("LoadXML","Incorrect XML",[r||this.xmlDoc,this.mainObject]);r.nodeName.indexOf("document")!=-1?o=r:(o=r,r=r.ownerDocument);var m=XPathResult.ANY_TYPE;if(p=="single"){m=XPathResult.FIRST_ORDERED_NODE_TYPE}var n=[],l=r.evaluate(s,o,function(){return q},m,null);if(m==XPathResult.FIRST_ORDERED_NODE_TYPE){return l.singleNodeValue}for(var k=l.iterateNext();k;){n[n.length]=k,k=l.iterateNext()}return n}};function j(){if(!this.catches){this.catches=[]}return this}j.prototype.catchError=function(d,c){this.catches[d]=c};j.prototype.throwError=function(e,d,f){if(this.catches[e]){return this.catches[e](e,d,f)}if(this.catches.ALL){return this.catches.ALL(e,d,f)}alert("Error type: "+e+"\nDescription: "+d);return null};window.dhtmlxError=new j;dtmlXMLLoaderObject.prototype.doXPathOpera=function(g,f){var l=g.replace(/[\/]+/gi,"/").split("/"),k=null,h=1;if(!l.length){return[]}if(l[0]=="."){k=[f]}else{if(l[0]==""){k=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(l[h].replace(/\[[^\]]*\]/g,"")),h++}else{return[]}}for(;h<l.length;h++){k=this._getAllNamedChilds(k,l[h])}l[h-1].indexOf("[")!=-1&&(k=this._filterXPath(k,l[h-1]));return k};dtmlXMLLoaderObject.prototype._filterXPath=function(f,e){for(var h=[],e=e.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),g=0;g<f.length;g++){f[g].getAttribute(e)&&(h[h.length]=f[g])}return h};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(g,f){var l=[];_isKHTML&&(f=f.toUpperCase());for(var k=0;k<g.length;k++){for(var h=0;h<g[k].childNodes.length;h++){_isKHTML?g[k].childNodes[h].tagName&&g[k].childNodes[h].tagName.toUpperCase()==f&&(l[l.length]=g[k].childNodes[h]):g[k].childNodes[h].tagName==f&&(l[l.length]=g[k].childNodes[h])}}return l};function dhtmlXHeir(e,d){for(var f in d){typeof d[f]=="function"&&(e[f]=d[f])}return e}function dhtmlxEvent(e,d,f){e.addEventListener?e.addEventListener(d,f,!1):e.attachEvent&&e.attachEvent("on"+d,f)}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(f,e,h){if(!h){h=this.xslDoc}if(h.responseXML){h=h.responseXML}var g=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+f+"']",h,"http://www.w3.org/1999/XSL/Transform","single");if(g!=null){g.firstChild.nodeValue=e}};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(f,e){if(!f){f=this.xslDoc}if(f.responseXML){f=f.responseXML}if(!e){e=this.xmlDoc}if(e.responseXML){e=e.responseXML}if(_isIE){g=new ActiveXObject("Msxml2.DOMDocument.3.0");try{e.transformNodeToObject(f,g)}catch(h){g=e.transformNode(f)}}else{if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(f)}var g=this.XSLProcessor.transformToDocument(e)}return g};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(e,d){var f=this.doXSLTransToObject(e,d);return typeof f=="string"?f:this.doSerialization(f)};dtmlXMLLoaderObject.prototype.doSerialization=function(d){if(!d){d=this.xmlDoc}if(d.responseXML){d=d.responseXML}if(_isIE){return d.xml}else{var c=new XMLSerializer;return c.serializeToString(d)}};dhtmlxEventable=function(a){a.attachEvent=function(a,c,d){a="ev_"+a.toLowerCase();this[a]||(this[a]=new this.eventCatcher(d||this));return a+":"+this[a].addEvent(c)};a.callEvent=function(a,c){a="ev_"+a.toLowerCase();return this[a]?this[a].apply(this,c):!0};a.checkEvent=function(a){return !!this["ev_"+a.toLowerCase()]};a.eventCatcher=function(a){var c=[],d=function(){for(var d=!0,g=0;g<c.length;g++){if(c[g]!=null){var f=c[g].apply(a,arguments),d=d&&f}}return d};d.addEvent=function(a){typeof a!="function"&&(a=eval(a));return a?c.push(a)-1:!1};d.removeEvent=function(a){c[a]=null};return d};a.detachEvent=function(a){if(a!=!1){var c=a.split(":");this[c[0]].removeEvent(c[1])}};a.detachAllEvents=function(){for(var a in this){a.indexOf("ev_")==0&&delete this[a]}};a=null};function xmlPointer(b){this.d=b}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var b=new XMLSerializer;return b.serializeToString(this.d)},get:function(b){return this.d.getAttribute(b)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(h,g,n,m){var k=this.d.childNodes,l=new xmlPointer;if(k.length){for(m=m||0;m<k.length;m++){if(k[m].tagName==h&&(l.d=k[m],g.apply(n,[l,m])==-1)){break}}}},get_all:function(){for(var e={},d=this.d.attributes,f=0;f<d.length;f++){e[d[f].name]=d[f].value}return e},sub:function(f){var e=this.d.childNodes,h=new xmlPointer;if(e.length){for(var g=0;g<e.length;g++){if(e[g].tagName==f){return h.d=e[g],h}}}},up:function(){return new xmlPointer(this.d.parentNode)},set:function(d,c){this.d.setAttribute(d,c)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(e){var d=this.d.childNodes;if(d.length){for(var f=0;f<d.length;f++){if(d[f].tagName==e){return !0}}}return !1},through:function(s,r,q,p,n){var o=this.d.childNodes;if(o.length){for(var m=0;m<o.length;m++){if(o[m].tagName==s&&o[m].getAttribute(r)!=null&&o[m].getAttribute(r)!=""&&(!q||o[m].getAttribute(r)==q)){var l=new xmlPointer(o[m]);p.apply(n,[l,m])}var k=this.d;this.d=o[m];this.through(s,r,q,p,n);this.d=k}}}};function dhtmlXTreeObject(h,g,n,m){if(_isIE){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(k){}}this.parentObject=typeof h!="object"?document.getElementById(h):h;this.parentObject.style.overflow="hidden";this._itim_dg=!0;this.dlmtr=",";this.dropLower=!1;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=!0;this.width=g;this.height=n;this.rootId=m;this.childCalc=null;this.def_line_img_y=this.def_line_img_x=this.def_img_y=this.def_img_x="18px";this._dragged=[];this._selected=[];this.style_pointer="pointer";this._aimgs=!0;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.mlitems=this.cMenu=0;this.iconURL="";this.dadmode=0;this.slowParse=!1;this.autoScroll=!0;this.hfMode=0;this.nodeCut=[];this.XMLloadingWarning=this.XMLsource=0;this._idpull={};this._pullSize=0;this.treeLinesOn=!0;this.tscheck=!1;this.timgen=!0;this.dpcpy=!1;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray="iconUncheckAll.gif,iconCheckAll.gif,iconCheckGray.gif,iconUncheckDis.gif,iconCheckDis.gif,iconCheckDis.gif".split(",");this.radioArray="radio_off.gif,radio_on.gif,radio_on.gif,radio_off.gif,radio_on.gif,radio_on.gif".split(",");this.lineArray="line2.gif,line3.gif,line4.gif,blank.gif,blank.gif,line1.gif".split(",");this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"];this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"];this.imageArray=["leaf.gif","folderOpen.gif","folderClosed.gif"];this.cutImg=[0,0,0];this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=new dhtmlDragAndDropObject;this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(_isFF){this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden"}var l=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(b){return l._doContClick(b||window.event,!0)}}this.allTree.onmousedown=function(b){return l._doContClick(b||window.event)};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);_isIE&&this.preventIECashing(!0);window.addEventListener&&window.addEventListener("unload",function(){try{l.destructor()}catch(b){}},!1);window.attachEvent&&window.attachEvent("onunload",function(){try{l.destructor()}catch(b){}});this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}dhtmlXTreeObject.prototype.setDataMode=function(b){this._datamode=b};dhtmlXTreeObject.prototype._doContClick=function(s,r){if(!r&&s.button!=2){return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0}for(var q=_isIE?s.srcElement:s.target;q&&q.tagName!="BODY";){if(q.parentObject){break}q=q.parentNode}if(!q||!q.parentObject){return !0}var p=q.parentObject;if(!this.callEvent("onRightClick",[p.id,s])){(s.srcElement||s.target).oncontextmenu=function(b){(b||event).cancelBubble=!0;return !1}}if(this._acMenu=p.cMenu||this.cMenu){if(!this.callEvent("onBeforeContextMenu",[p.id])){return !0}(s.srcElement||s.target).oncontextmenu=function(b){(b||event).cancelBubble=!0;return !1};if(this._acMenu.showContextMenu){var n=window.document.documentElement,o=window.document.body,m=[n.scrollLeft||o.scrollLeft,n.scrollTop||o.scrollTop];if(_isIE){var l=s.clientX+m[0],k=s.clientY+m[1]}else{l=s.pageX,k=s.pageY}this._acMenu.showContextMenu(l-1,k-1);this.contextID=p.id;s.cancelBubble=!0;this._acMenu._skip_hide=!0}else{q.contextMenuId=p.id,q.contextMenu=this._acMenu,q.a=this._acMenu._contextStart,q.a(q,s),q.a=null}return !1}return !0};dhtmlXTreeObject.prototype.enableIEImageFix=function(b){b?(this._getImg=function(){var c=document.createElement("DIV");c.innerHTML="&nbsp;";c.className="dhx_bg_img_fix";return c},this._setSrc=function(d,e){d.style.backgroundImage="url("+e+")"},this._getSrc=function(d){var e=d.style.backgroundImage;return e.substr(4,e.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(c){return document.createElement(c==this.rootId?"div":"img")},this._setSrc=function(d,e){d.src=e},this._getSrc=function(c){return c.src})};dhtmlXTreeObject.prototype.destructor=function(){for(var d in this._idpull){var c=this._idpull[d];if(c){c.parentObject=null,c.treeNod=null,c.childNodes=null,c.span=null,c.tr.nodem=null,c.tr=null,c.htmlNode.objBelong=null,c.htmlNode=null,this._idpull[d]=null}}this.parentObject.innerHTML="";this.XMLLoader&&this.XMLLoader.destructor();this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(d in this){this[d]=null}};function cObject(){return this}cObject.prototype={};cObject.prototype.clone=function(){function b(){}b.prototype=this;return new b};function dhtmlXTreeItemObject(h,g,n,m,k,l){this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=m;this.label=g;this.parentObject=n;this.actionHandler=k;this.images=[m.imageArray[0],m.imageArray[1],m.imageArray[2]];this.id=m._globalIdStorageAdd(h,this);this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,l):this.treeNod._createItem(0,this,l);this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(d,c){if(this._globalIdStorageFind(d,1,1)){return d=d+"_"+(new Date).valueOf(),this._globalIdStorageAdd(d,c)}this._idpull[d]=c;this._pullSize++;return d};dhtmlXTreeObject.prototype._globalIdStorageSub=function(b){this._idpull[b]&&(this._unselectItem(this._idpull[b]),this._idpull[b]=null,this._pullSize--);this._locker&&this._locker[b]&&(this._locker[b]=!1)};dhtmlXTreeObject.prototype._globalIdStorageFind=function(d){var c=this._idpull[d];return c?c:null};dhtmlXTreeObject.prototype._escape=function(b){switch(this.utfesc){case"none":return b;case"utf8":return encodeURIComponent(b);default:return escape(b)}};dhtmlXTreeObject.prototype._drawNewTr=function(f){var e=document.createElement("tr"),h=document.createElement("td"),g=document.createElement("td");h.appendChild(document.createTextNode(" "));g.colSpan=3;g.appendChild(f);e.appendChild(h);e.appendChild(g);return e};dhtmlXTreeObject.prototype.loadXMLString=function(e,d){var f=this;this.parsCount||this.callEvent("onXLS",[f,null]);this.xmlstate=1;if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXMLString(e)};dhtmlXTreeObject.prototype.loadXML=function(e,d){if(this._datamode&&this._datamode!="xml"){return this["load"+this._datamode.toUpperCase()](e,d)}var f=this;this.parsCount||this.callEvent("onXLS",[f,this._ld_id]);this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXML(e)};dhtmlXTreeObject.prototype._attachChildNode=function(O,N,M,L,J,K,I,H,F,G,C){if(G&&G.parentObject){O=G.parentObject}if(O.XMLload==0&&this.XMLsource&&!this.XMLloadingWarning){O.XMLload=1,this._loadDynXML(O.id)}var D=O.childsCount,E=O.childNodes;if(C&&C.tr.previousSibling){C.tr.previousSibling.previousSibling?G=C.tr.previousSibling.nodem:H=H.replace("TOP","")+",TOP"}if(G){var A,w;for(A=0;A<D;A++){if(E[A]==G){for(w=D;w!=A;w--){E[1+w]=E[w]}break}}A++;D=A}if(H){for(var v=H.split(","),y=0;y<v.length;y++){switch(v[y]){case"TOP":if(O.childsCount>0){G={},G.tr=O.childNodes[0].tr.previousSibling}O._has_top=!0;for(A=D;A>0;A--){E[A]=E[A-1]}D=0}}}var B;if(!(B=this._idpull[N])||B.span!=-1){B=E[D]=new dhtmlXTreeItemObject(N,M,O,this,L,1),N=E[D].id,O.childsCount++}if(!B.htmlNode){B.label=M,B.htmlNode=this._createItem(this.checkBoxOff?1:0,B),B.htmlNode.objBelong=B}J&&(B.images[0]=J);K&&(B.images[1]=K);I&&(B.images[2]=I);var x=this._drawNewTr(B.htmlNode);if(this.XMLloadingWarning||this._hAdI){B.htmlNode.parentNode.parentNode.style.display="none"}G&&G.tr&&G.tr.nextSibling?O.htmlNode.childNodes[0].insertBefore(x,G.tr.nextSibling):this.parsingOn==O.id?this.parsedArray[this.parsedArray.length]=x:O.htmlNode.childNodes[0].appendChild(x);G&&!G.span&&(G=null);if(this.XMLsource){B.XMLload=F&&F!=0?0:1}B.tr=x;x.nodem=B;if(O.itemId==0){x.childNodes[0].className="hiddenRow"}(O._r_logic||this._frbtr)&&this._setSrc(B.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);if(H){v=H.split(",");for(y=0;y<v.length;y++){switch(v[y]){case"SELECT":this.selectItem(N,!1);break;case"CALL":this.selectItem(N,!0);break;case"CHILD":B.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+N:this.setCheck(N,1);break;case"HCHECKED":this._setCheck(B,"unsure");break;case"OPEN":B.openMe=1}}}if(!this.XMLloadingWarning&&(this._getOpenState(O)<0&&!this._hAdI&&this.openItem(O.id),G&&(this._correctPlus(G),this._correctLine(G)),this._correctPlus(O),this._correctLine(O),this._correctPlus(B),O.childsCount>=2&&(this._correctPlus(E[O.childsCount-2]),this._correctLine(E[O.childsCount-2])),O.childsCount!=2&&this._correctPlus(E[0]),this.tscheck&&this._correctCheckStates(O),this._onradh)){if(this.xmlstate==1){var u=this.onXLE;this.onXLE=function(b){this._onradh(N);u&&u(b)}}else{this._onradh(N)}}return B};dhtmlXTreeObject.prototype.insertNewItem=function(w,v,u,s,q,r,p,o,l){var n=this._globalIdStorageFind(w);if(!n){return -1}var k=this._attachChildNode(n,v,u,s,q,r,p,o,l);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1}return k};dhtmlXTreeObject.prototype.insertNewChild=function(s,r,q,p,n,o,m,l,k){return this.insertNewItem(s,r,q,p,n,o,m,l,k)};dhtmlXTreeObject.prototype._parseXMLTree=function(h,g,n,m,k){var l=new xmlPointer(k.getXMLTopNode("tree"));h._parse(l);h._p=l};dhtmlXTreeObject.prototype._parseItem=function(u,s,r,q){var o;if(this._srnd&&(!this._idpull[o=u.get("id")]||!this._idpull[o].span)){this._addItemSRND(s.id,o,u)}else{var p=u.get_all();if(typeof this.waitUpdateXML=="object"&&!this.waitUpdateXML[p.id]){this._parse(u,p.id,1)}else{var n=[];p.select&&n.push("SELECT");p.top&&n.push("TOP");if(p.call){this.nodeAskingCall=p.id}p.checked==-1?n.push("HCHECKED"):p.checked&&n.push("CHECKED");p.open&&n.push("OPEN");if(this.waitUpdateXML){if(this._globalIdStorageFind(p.id)){var m=this.updateItem(p.id,p.text,p.im0,p.im1,p.im2,p.checked,p.child)}else{this.npl==0?n.push("TOP"):r=s.childNodes[this.npl],m=this._attachChildNode(s,p.id,p.text,0,p.im0,p.im1,p.im2,n.join(","),p.child,0,r),p.id=m.id,r=null}}else{m=this._attachChildNode(s,p.id,p.text,0,p.im0,p.im1,p.im2,n.join(","),p.child,q||0,r)}if(p.tooltip){m.span.parentNode.parentNode.title=p.tooltip}p.style&&(m.span.style.cssText?m.span.style.cssText+=";"+p.style:m.span.setAttribute("style",m.span.getAttribute("style")+"; "+p.style));if(p.radio){m._r_logic=!0}if(p.nocheckbox){var k=m.span.parentNode.previousSibling.previousSibling;k.childNodes[0].style.display="none";if(window._KHTMLrv){k.style.display="none"}m.nocheckbox=!0}p.disabled&&(p.checked!=null&&this._setCheck(m,p.checked),this.disableCheckbox(m,1));m._acc=p.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,u,p,s?s.id:0);this.setItemColor(m,p.aCol,p.sCol);p.locked=="1"&&this.lockItem(m.id,!0,!0);(p.imwidth||p.imheight)&&this.setIconSize(p.imwidth,p.imheight,m);(p.closeable=="0"||p.closeable=="1")&&this.setItemCloseable(m,p.closeable);var l="";p.topoffset&&this.setItemTopOffset(m,p.topoffset);if(!this.slowParse||typeof this.waitUpdateXML=="object"){u.sub_exists("item")&&(l=this._parse(u,p.id,1))}if(l!=""){this.nodeAskingCall=l}u.each("userdata",function(a){this.setUserData(u.get("id"),a.get("name"),a.content())},this)}}};dhtmlXTreeObject.prototype._parse=function(B,A,y,x){if(this._srnd&&!this.parentObject.offsetHeight){var v=this;return window.setTimeout(function(){v._parse(B,A,y,x)},100)}if(B.exists()){this.skipLock=!0;if(!A){var A=B.get("id"),w=B.get("dhx_security");if(w){dhtmlx.security_key=w}if(B.get("radio")){this.htmlNode._r_logic=!0}this.parsingOn=A;this.parsedArray=[];this.nodeAskingCall=this.setCheckList=""}var u=this._globalIdStorageFind(A);if(!u){return dhtmlxError.throwError("DataStructure","XML refers to not existing parent")}this.parsCount=this.parsCount?this.parsCount+1:1;this.XMLloadingWarning=1;var s=u.childsCount&&!x&&!this._edsbps&&!u._has_top?0:0;this.npl=0;B.each("item",function(b){u.XMLload=1;this._parseItem(b,u,0,s);this.npl++},this,x);if(!y){B.each("userdata",function(a){this.setUserData(B.get("id"),a.get("name"),a.content())},this);u.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=!1;for(var q=u.childsCount-1;q>=0;q--){u.childNodes[q]._dmark&&this.deleteItem(u.childNodes[q].id)}}for(var r=this._globalIdStorageFind(this.parsingOn),q=0;q<this.parsedArray.length;q++){u.htmlNode.childNodes[0].appendChild(this.parsedArray[q])}this.parsedArray=[];this.lastLoadedXMLId=A;this.XMLloadingWarning=0;for(var n=this.setCheckList.split(this.dlmtr),o=0;o<n.length;o++){n[o]&&this.setCheck(n[o],1)}this.XMLsource&&this.tscheck&&this.smcheck&&u.id!=this.rootId&&(u.checkstate===0?this._setSubChecked(0,u):u.checkstate===1&&this._setSubChecked(1,u));this._redrawFrom(this,null,x);B.get("order")&&B.get("order")!="none"&&this._reorderBranch(u,B.get("order"),!0);this.nodeAskingCall!=""&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);this._branchUpdate&&this._branchUpdateNext(B)}if(this.parsCount==1){this.parsingOn=null;if(!this._edsbps||!this._edsbpsA.length){var p=this;window.setTimeout(function(){p.callEvent("onXLE",[p,A])},1);this.xmlstate=0}this.skipLock=!1}this.parsCount--;if(!y&&this.onXLE){this.onXLE(this,A)}return this.nodeAskingCall}};dhtmlXTreeObject.prototype._branchUpdateNext=function(b){b.each("item",function(d){var e=d.get("id");if(!this._idpull[e]||this._idpull[e].XMLload){this._branchUpdate++,this.smartRefreshItem(d.get("id"),d)}},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(e,d){if(e.nodeType==1&&e.tagName=="userdata"){var f=e.getAttribute("name");f&&e.childNodes[0]&&this.setUserData(d,f,e.childNodes[0].data)}};dhtmlXTreeObject.prototype._redrawFrom=function(k,h,p,o){if(h){m=h}else{var m=k._globalIdStorageFind(k.lastLoadedXMLId);k.lastLoadedXMLId=-1;if(!m){return 0}}for(var n=0,l=p?p-1:0;l<m.childsCount;l++){if(!this._branchUpdate||this._getOpenState(m)==1){if(!h||o==1){m.childNodes[l].htmlNode.parentNode.parentNode.style.display=""}}if(m.childNodes[l].openMe==1){this._openItem(m.childNodes[l]),m.childNodes[l].openMe=0}k._redrawFrom(k,m.childNodes[l])}if(!m.unParsed&&(m.XMLload||!this.XMLsource)){m._acc=n}k._correctLine(m);k._correctPlus(m)};dhtmlXTreeObject.prototype._createSelf=function(){var b=document.createElement("div");b.className="containerTableStyle";b.style.width=this.width;b.style.height=this.height;this.parentObject.appendChild(b);return b};dhtmlXTreeObject.prototype._xcloseAll=function(f){if(!f.unParsed){if(this.rootId!=f.id){if(!f.htmlNode){return}for(var e=f.htmlNode.childNodes[0].childNodes,h=e.length,g=1;g<h;g++){e[g].style.display="none"}this._correctPlus(f)}for(g=0;g<f.childsCount;g++){f.childNodes[g].childsCount&&this._xcloseAll(f.childNodes[g])}}};dhtmlXTreeObject.prototype._xopenAll=function(d){this._HideShow(d,2);for(var c=0;c<d.childsCount;c++){this._xopenAll(d.childNodes[c])}};dhtmlXTreeObject.prototype._correctPlus=function(g){if(g.htmlNode){var e=g.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,l=g.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],k=this.lineArray;if(this.XMLsource&&!g.XMLload){if(k=this.plusArray,this._setSrc(l,this.iconURL+g.images[2]),this._txtimg){return e.innerHTML="[+]"}}else{if(g.childsCount||g.unParsed){if(g.htmlNode.childNodes[0].childNodes[1]&&g.htmlNode.childNodes[0].childNodes[1].style.display!="none"){if(!g.wsign){k=this.minusArray}this._setSrc(l,this.iconURL+g.images[1]);if(this._txtimg){return e.innerHTML="[-]"}}else{if(!g.wsign){k=this.plusArray}this._setSrc(l,this.iconURL+g.images[2]);if(this._txtimg){return e.innerHTML="[+]"}}}else{this._setSrc(l,this.iconURL+g.images[0])}}var h=2;g.treeNod.treeLinesOn?(g.parentObject&&(h=this._getCountStatus(g.id,g.parentObject)),this._setSrc(e,this.imPath+k[h])):this._setSrc(e,this.imPath+k[3])}};dhtmlXTreeObject.prototype._correctLine=function(e){if(e.htmlNode){var d=e.parentObject;if(d){if(this._getLineStatus(e.id,d)==0||!this.treeLinesOn){for(var f=1;f<=e.childsCount;f++){if(!e.htmlNode.childNodes[0].childNodes[f]){break}e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundImage="";e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundRepeat=""}}else{for(f=1;f<=e.childsCount;f++){if(!e.htmlNode.childNodes[0].childNodes[f]){break}e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundRepeat="repeat-y"}}}}};dhtmlXTreeObject.prototype._getCountStatus=function(d,c){return c.childsCount<=1?c.id==this.rootId?4:0:c.childNodes[0].id==d?c.id==this.rootId?2:1:c.childNodes[c.childsCount-1].id==d?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(d,c){return c.childNodes[c.childsCount-1].id==d?0:1};dhtmlXTreeObject.prototype._HideShow=function(g,e){if(this.XMLsource&&!g.XMLload){if(e!=1){g.XMLload=1,this._loadDynXML(g.id)}}else{var l=g.htmlNode.childNodes[0].childNodes,k=l.length;if(k>1){(l[1].style.display!="none"||e==1)&&e!=2?(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none"):nodestyle="";for(var h=1;h<k;h++){l[h].style.display=nodestyle}}this._correctPlus(g)}};dhtmlXTreeObject.prototype._getOpenState=function(d){if(!d.htmlNode){return 0}var c=d.htmlNode.childNodes[0].childNodes;return c.length<=1?0:c[1].style.display!="none"?1:-1};dhtmlXTreeObject.prototype.onRowClick2=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onDblClick",[this.parentObject.id,b])){return !1}this.parentObject.closeble&&this.parentObject.closeble!="0"?b._HideShow(this.parentObject):b._HideShow(this.parentObject,2);if(b.checkEvent("onOpenEnd")){b.xmlstate?(b._oie_onXLE.push(b.onXLE),b.onXLE=b._epnFHe):b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)])}return !1};dhtmlXTreeObject.prototype.onRowClick=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onOpenStart",[this.parentObject.id,b._getOpenState(this.parentObject)])){return 0}this.parentObject.closeble&&this.parentObject.closeble!="0"?b._HideShow(this.parentObject):b._HideShow(this.parentObject,2);if(b.checkEvent("onOpenEnd")){b.xmlstate?(b._oie_onXLE.push(b.onXLE),b.onXLE=b._epnFHe):b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)])}};dhtmlXTreeObject.prototype._epnFHe=function(e,d,f){d!=this.rootId&&this.callEvent("onOpenEnd",[d,e.getOpenState(d)]);e.onXLE=e._oie_onXLE.pop();if(!f&&!e._oie_onXLE.length&&e.onXLE){e.onXLE(e,d)}};dhtmlXTreeObject.prototype.onRowClickDown=function(d){var d=d||window.event,c=this.parentObject.treeNod;c._selectItem(this.parentObject,d)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var d=[],c=0;c<this._selected.length;c++){d[c]=this._selected[c].id}return d.join(this.dlmtr)};dhtmlXTreeObject.prototype._selectItem=function(d){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}this._unselectItems();this._markItem(d);if(this.checkEvent("onSelect")){var c=this.getSelectedItemId();c!=this._onSSCFold&&this.callEvent("onSelect",[c])}};dhtmlXTreeObject.prototype._markItem=function(b){if(b.scolor){b.span.style.color=b.scolor}b.span.className="selectedTreeRow";b.i_sel=!0;this._selected[this._selected.length]=b};dhtmlXTreeObject.prototype.getIndexById=function(d){var c=this._globalIdStorageFind(d);return !c?null:this._getIndex(c)};dhtmlXTreeObject.prototype._getIndex=function(e){for(var d=e.parentObject,f=0;f<d.childsCount;f++){if(d.childNodes[f]==e){return f}}};dhtmlXTreeObject.prototype._unselectItem=function(d){if(d&&d.i_sel){d.span.className="standartTreeRow";if(d.acolor){d.span.style.color=d.acolor}d.i_sel=!1;for(var c=0;c<this._selected.length;c++){if(!this._selected[c].i_sel){this._selected.splice(c,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var d=0;d<this._selected.length;d++){var c=this._selected[d];c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=!1}this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(h,g,n){var h=h||window.event,m=this.parentObject;if(g){m=g.parentObject}var k=m.treeNod,l=k.getSelectedItemId();(!h||!h.skipUnSel)&&k._selectItem(m,h);n||(m.actionHandler?m.actionHandler(m.id,l):k.callEvent("onClick",[m.id,l]))};dhtmlXTreeObject.prototype._correctCheckStates=function(g){if(this.tscheck&&g&&g.id!=this.rootId){var e=g.childNodes,l=0,k=0;if(g.childsCount!=0){for(var h=0;h<g.childsCount;h++){if(!e[h].dscheck){if(e[h].checkstate==0){l=1}else{if(e[h].checkstate==1){k=1}else{k=l=1;break}}}}l&&k?this._setCheck(g,"unsure"):l?this._setCheck(g,!1):this._setCheck(g,!0);this._correctCheckStates(g.parentObject)}}};dhtmlXTreeObject.prototype.onCheckBoxClick=function(){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){if(this.parentObject.dscheck){return !0}this.treeNod.tscheck?this.parentObject.checkstate==1?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):this.parentObject.checkstate==1?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0);this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])}};dhtmlXTreeObject.prototype._createItem=function(B,A,y){var x=document.createElement("table");x.cellSpacing=0;x.cellPadding=0;x.border=0;if(this.hfMode){x.style.tableLayout="fixed"}x.style.margin=0;x.style.padding=0;var v=document.createElement("tbody"),w=document.createElement("tr"),u=document.createElement("td");u.className="standartTreeImage";if(this._txtimg){var s=document.createElement("div");u.appendChild(s);s.className="dhx_tree_textSign"}else{s=this._getImg(A.id);s.border="0";if(s.tagName=="IMG"){s.align="absmiddle"}u.appendChild(s);s.style.padding=0;s.style.margin=0;s.style.width=this.def_line_img_x;s.style.height=this.def_line_img_y}var q=document.createElement("td"),r=this._getImg(this.cBROf?this.rootId:A.id);r.checked=0;this._setSrc(r,this.imPath+this.checkArray[0]);r.style.width="16px";r.style.height="16px";if(!B){(!_isIE?q:r).style.display="none"}q.appendChild(r);if(!this.cBROf&&r.tagName=="IMG"){r.align="absmiddle"}r.onclick=this.onCheckBoxClick;r.treeNod=this;r.parentObject=A;q.width=window._KHTMLrv?"16px":"20px";var n=document.createElement("td");n.className="standartTreeImage";var o=this._getImg(this.timgen?A.id:this.rootId);o.onmousedown=this._preventNsDrag;o.ondragstart=this._preventNsDrag;o.border="0";if(this._aimgs){o.parentObject=A;if(o.tagName=="IMG"){o.align="absmiddle"}o.onclick=this.onRowSelect}y||this._setSrc(o,this.iconURL+this.imageArray[0]);n.appendChild(o);o.style.padding=0;o.style.margin=0;if(this.timgen){n.style.width=o.style.width=this.def_img_x,o.style.height=this.def_img_y}else{if(o.style.width="0px",o.style.height="0px",_isOpera||window._KHTMLrv){n.style.display="none"}}var p=document.createElement("td");p.className="standartTreeRow";A.span=document.createElement("span");A.span.className="standartTreeRow";this.mlitems?(A.span.style.width=this.mlitems,A.span.style.display="block"):p.noWrap=!0;k.style.width="100%";/* if(_isIE&&_isIE>7){p.style.width="999999px"}else{if(!window._KHTMLrv){p.style.width="100%"}} */A.span.innerHTML=A.label;p.appendChild(A.span);p.parentObject=A;u.parentObject=A;p.onclick=this.onRowSelect;u.onclick=this.onRowClick;p.ondblclick=this.onRowClick2;if(this.ettip){w.title=A.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(n,this),n.parentObject=A}this.dragger.addDraggableItem(p,this)}A.span.style.paddingLeft="5px";A.span.style.paddingRight="5px";p.style.verticalAlign="";p.style.fontSize="10pt";p.style.cursor=this.style_pointer;w.appendChild(u);w.appendChild(q);w.appendChild(n);w.appendChild(p);v.appendChild(w);x.appendChild(v);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){w.onmousemove=this._itemMouseIn,w[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut}return x};dhtmlXTreeObject.prototype.setImagePath=function(b){this.iconURL=this.imPath=b};dhtmlXTreeObject.prototype.setIconPath=function(b){this.iconURL=b};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(b){this.attachEvent("onRightClick",b)};dhtmlXTreeObject.prototype.setOnClickHandler=function(b){this.attachEvent("onClick",b)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(b){this.attachEvent("onSelect",b)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(b){this.XMLsource=b};dhtmlXTreeObject.prototype.setOnCheckHandler=function(b){this.attachEvent("onCheck",b)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(b){this.attachEvent("onOpenEnd",b)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(b){this.attachEvent("onDblClick",b)};dhtmlXTreeObject.prototype.openAllItems=function(d){var c=this._globalIdStorageFind(d);if(!c){return 0}this._xopenAll(c)};dhtmlXTreeObject.prototype.getOpenState=function(d){var c=this._globalIdStorageFind(d);return !c?"":this._getOpenState(c)};dhtmlXTreeObject.prototype.closeAllItems=function(d){if(d===window.undefined){d=this.rootId}var c=this._globalIdStorageFind(d);if(!c){return 0}this._xcloseAll(c);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(f,e,h){var g=this._globalIdStorageFind(f,0,!0);if(g){if(e=="hint"){g.htmlNode.childNodes[0].childNodes[0].title=h}if(typeof g.userData["t_"+e]=="undefined"){g._userdatalist?g._userdatalist+=","+e:g._userdatalist=e}g.userData["t_"+e]=h}};dhtmlXTreeObject.prototype.getUserData=function(e,d){var f=this._globalIdStorageFind(e,0,!0);return !f?void 0:f.userData["t_"+d]};dhtmlXTreeObject.prototype.getItemColor=function(e){var d=this._globalIdStorageFind(e);if(!d){return 0}var f={};if(d.acolor){f.acolor=d.acolor}if(d.scolor){f.scolor=d.scolor}return f};dhtmlXTreeObject.prototype.setItemColor=function(f,e,h){var g=f&&f.span?f:this._globalIdStorageFind(f);if(g){if(g.i_sel){if(h){g.span.style.color=h}}else{if(e){g.span.style.color=e}}if(h){g.scolor=h}if(e){g.acolor=e}}else{return 0}};dhtmlXTreeObject.prototype.getItemText=function(d){var c=this._globalIdStorageFind(d);return !c?0:c.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML};dhtmlXTreeObject.prototype.getParentId=function(d){var c=this._globalIdStorageFind(d);return !c||!c.parentObject?"":c.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(e,d){if(e!=d){var f=this._globalIdStorageFind(e);if(!f){return 0}f.id=d;f.span.contextMenuId=d;this._idpull[d]=this._idpull[e];delete this._idpull[e]}};dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut();this.nodeCut=[].concat(this._selected);for(var d=0;d<this.nodeCut.length;d++){var c=this.nodeCut[d];c._cimgs=[];c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};dhtmlXTreeObject.prototype.doPaste=function(e){var d=this._globalIdStorageFind(e);if(!d){return 0}for(var f=0;f<this.nodeCut.length;f++){this._checkPNodes(d,this.nodeCut[f])||this._moveNode(this.nodeCut[f],d)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var d=0;d<this.nodeCut.length;d++){var c=this.nodeCut[d];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=[]};dhtmlXTreeObject.prototype._moveNode=function(d,c){return this._moveNodeTo(d,c)};dhtmlXTreeObject.prototype._fixNodesCollection=function(l,k){var r=0,q=0,o=l.childNodes,p=l.childsCount-1;if(k!=o[p]){for(var n=0;n<p;n++){o[n]==o[p]&&(o[n]=o[n+1],o[n+1]=o[p])}for(n=0;n<p+1;n++){if(r){var m=o[n];o[n]=r;r=m}else{o[n]==k&&(r=o[n],o[n]=o[p])}}}};dhtmlXTreeObject.prototype._recreateBranch=function(k,h,p){var o,m="";if(p){for(o=0;o<h.childsCount;o++){if(h.childNodes[o]==p){break}}o!=0?p=h.childNodes[o-1]:(m="TOP",p="")}var n=this._onradh;this._onradh=null;var l=this._attachChildNode(h,k.id,k.label,0,k.images[0],k.images[1],k.images[2],m,0,p);l._userdatalist=k._userdatalist;l.userData=k.userData.clone();l.XMLload=k.XMLload;if(n){this._onradh=n,this._onradh(l.id)}for(o=0;o<k.childsCount;o++){this._recreateBranch(k.childNodes[o],l,0,1)}return l};dhtmlXTreeObject.prototype._moveNodeTo=function(B,A,y){if(B.treeNod._nonTrivialNode){return B.treeNod._nonTrivialNode(this,A,y,B)}if(this._checkPNodes(A,B)){return !1}var x=A.mytype?B.treeNod.lWin!=A.lWin:B.treeNod.lWin!=A.treeNod.lWin;if(!this.callEvent("onDrag",[B.id,A.id,y?y.id:null,B.treeNod,A.treeNod])){return !1}if(A.XMLload==0&&this.XMLsource){A.XMLload=1,this._loadDynXML(A.id)}this.openItem(A.id);var v=B.treeNod,w=B.parentObject.childsCount,u=B.parentObject;if(x||v.dpcpy){var s=B.id,B=this._recreateBranch(B,A,y);v.dpcpy||v.deleteItem(s)}else{var q=A.childsCount,r=A.childNodes;if(q==0){A._open=!0}v._unselectItem(B);r[q]=B;B.treeNod=A.treeNod;A.childsCount++;var n=this._drawNewTr(r[q].htmlNode);y?(A.htmlNode.childNodes[0].insertBefore(n,y.tr),this._fixNodesCollection(A,y),r=A.childNodes):(A.htmlNode.childNodes[0].appendChild(n),this.dadmode==1&&this._fixNodesCollection(A,y))}if(!v.dpcpy&&!x){var o=B.tr;document.all&&navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1?window.setTimeout(function(){o.parentNode.removeChild(o)},250):B.parentObject.htmlNode.childNodes[0].removeChild(B.tr);if(!y||A!=B.parentObject){for(var p=0;p<u.childsCount;p++){if(u.childNodes[p].id==B.id){u.childNodes[p]=0;break}}}else{u.childNodes[u.childsCount-1]=0}v._compressChildList(u.childsCount,u.childNodes);u.childsCount--}if(!x&&!v.dpcpy){B.tr=n;n.nodem=B;B.parentObject=A;if(v!=A.treeNod){if(B.treeNod._registerBranch(B,v)){return}this._clearStyles(B);this._redrawFrom(this,B.parentObject);this._onradh&&this._onradh(B.id)}this._correctPlus(A);this._correctLine(A);this._correctLine(B);this._correctPlus(B);y?this._correctPlus(y):A.childsCount>=2&&(this._correctPlus(r[A.childsCount-2]),this._correctLine(r[A.childsCount-2]));this._correctPlus(r[A.childsCount-1]);this.tscheck&&this._correctCheckStates(A);v.tscheck&&v._correctCheckStates(u)}w>1&&(v._correctPlus(u.childNodes[w-2]),v._correctLine(u.childNodes[w-2]));v._correctPlus(u);v._correctLine(u);this.callEvent("onDrop",[B.id,A.id,y?y.id:null,v,A.treeNod]);return B.id};dhtmlXTreeObject.prototype._clearStyles=function(f){if(f.htmlNode){var e=f.htmlNode.childNodes[0].childNodes[0].childNodes[1],h=e.nextSibling.nextSibling;f.span.innerHTML=f.label;f.i_sel=!1;f._aimgs&&this.dragger.removeDraggableItem(e.nextSibling);this.checkBoxOff?(e.childNodes[0].style.display="",e.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(e.childNodes[0],this.imPath+this.checkArray[f.checkstate])):e.childNodes[0].style.display="none";e.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(h);this.dragAndDropOff&&this.dragger.addDraggableItem(h,this);this._aimgs&&this.dragger.addDraggableItem(e.nextSibling,this);h.childNodes[0].className="standartTreeRow";h.onclick=this.onRowSelect;h.ondblclick=this.onRowClick2;e.previousSibling.onclick=this.onRowClick;this._correctLine(f);this._correctPlus(f);for(var g=0;g<f.childsCount;g++){this._clearStyles(f.childNodes[g])}}};dhtmlXTreeObject.prototype._registerBranch=function(e,d){d&&d._globalIdStorageSub(e.id);e.id=this._globalIdStorageAdd(e.id,e);e.treeNod=this;for(var f=0;f<e.childsCount;f++){this._registerBranch(e.childNodes[f],d)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(b){this.tscheck=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(b){this.ehlt=!0;this.attachEvent("onMouseIn",b)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(b){this.ehlt=!0;this.attachEvent("onMouseOut",b)};dhtmlXTreeObject.prototype.enableTreeImages=function(b){this.timgen=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableFixedMode=function(b){this.hfMode=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(d,c){this.checkBoxOff=convertStringToBoolean(d);this.cBROf=!(this.checkBoxOff||convertStringToBoolean(c))};dhtmlXTreeObject.prototype.setStdImages=function(e,d,f){this.imageArray[0]=e;this.imageArray[1]=d;this.imageArray[2]=f};dhtmlXTreeObject.prototype.enableTreeLines=function(b){this.treeLinesOn=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setImageArrays=function(h,g,n,m,k,l){switch(h){case"plus":this.plusArray[0]=g;this.plusArray[1]=n;this.plusArray[2]=m;this.plusArray[3]=k;this.plusArray[4]=l;break;case"minus":this.minusArray[0]=g,this.minusArray[1]=n,this.minusArray[2]=m,this.minusArray[3]=k,this.minusArray[4]=l}};dhtmlXTreeObject.prototype.openItem=function(d){var c=this._globalIdStorageFind(d);return c?this._openItem(c):0};dhtmlXTreeObject.prototype._openItem=function(d){var c=this._getOpenState(d);if(c<0||this.XMLsource&&!d.XMLload){if(!this.callEvent("onOpenStart",[d.id,c])){return 0}this._HideShow(d,2);if(this.checkEvent("onOpenEnd")){this.onXLE==this._epnFHe&&this._epnFHe(this,d.id,!0),!this.xmlstate||!this.XMLsource?this.callEvent("onOpenEnd",[d.id,this._getOpenState(d)]):(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe)}}else{this._srnd&&this._HideShow(d,2)}d.parentObject&&!this._skip_open_parent&&this._openItem(d.parentObject)};dhtmlXTreeObject.prototype.closeItem=function(d){if(this.rootId==d){return 0}var c=this._globalIdStorageFind(d);if(!c){return 0}c.closeble&&this._HideShow(c,1)};dhtmlXTreeObject.prototype.getLevel=function(d){var c=this._globalIdStorageFind(d);return !c?0:this._getNodeLevel(c,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(e,d){var d=convertStringToBoolean(d),f=e&&e.span?e:this._globalIdStorageFind(e);if(!f){return 0}f.closeble=d};dhtmlXTreeObject.prototype._getNodeLevel=function(d,c){return d.parentObject?this._getNodeLevel(d.parentObject,c+1):c};dhtmlXTreeObject.prototype.hasChildren=function(d){var c=this._globalIdStorageFind(d);return c?this.XMLsource&&!c.XMLload?!0:c.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(e){for(var d=0,f=0;f<e.childsCount;f++){e.childNodes[f].childsCount==0&&d++}return d};dhtmlXTreeObject.prototype.setItemText=function(f,e,h){var g=this._globalIdStorageFind(f);if(!g){return 0}g.label=e;g.span.innerHTML=e;g.span.parentNode.parentNode.title=h||""};dhtmlXTreeObject.prototype.getItemTooltip=function(d){var c=this._globalIdStorageFind(d);return !c?"":c.span.parentNode.parentNode._dhx_title||c.span.parentNode.parentNode.title||""};dhtmlXTreeObject.prototype.refreshItem=function(d){if(!d){d=this.rootId}var c=this._globalIdStorageFind(d);this.deleteChildItems(d);this._loadDynXML(d)};dhtmlXTreeObject.prototype.setItemImage2=function(g,e,l,k){var h=this._globalIdStorageFind(g);if(!h){return 0}h.images[1]=l;h.images[2]=k;h.images[0]=e;this._correctPlus(h)};dhtmlXTreeObject.prototype.setItemImage=function(f,e,h){var g=this._globalIdStorageFind(f);if(!g){return 0}h?(g.images[1]=e,g.images[2]=h):g.images[0]=e;this._correctPlus(g)};dhtmlXTreeObject.prototype.getSubItems=function(e){var d=this._globalIdStorageFind(e,0,1);if(!d){return 0}var f="";for(i=0;i<d.childsCount;i++){f?f+=this.dlmtr+d.childNodes[i].id:f=d.childNodes[i].id}return f};dhtmlXTreeObject.prototype._getAllScraggyItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){var g=f.childNodes[h].unParsed?this._getAllScraggyItemsXML(f.childNodes[h].unParsed,1):this._getAllScraggyItems(f.childNodes[h]);g&&(e?e+=this.dlmtr+g:e=g)}else{e?e+=this.dlmtr+f.childNodes[h].id:e=f.childNodes[h].id}}return e};dhtmlXTreeObject.prototype._getAllFatItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){e?e+=this.dlmtr+f.childNodes[h].id:e=f.childNodes[h].id;var g=f.childNodes[h].unParsed?this._getAllFatItemsXML(f.childNodes[h].unParsed,1):this._getAllFatItems(f.childNodes[h]);g&&(e+=this.dlmtr+g)}}return e};dhtmlXTreeObject.prototype._getAllSubItems=function(h,g,n){var m=n?n:this._globalIdStorageFind(h);if(!m){return 0}for(var g="",k=0;k<m.childsCount;k++){g?g+=this.dlmtr+m.childNodes[k].id:g=m.childNodes[k].id;var l=this._getAllSubItems(0,g,m.childNodes[k]);l&&(g+=this.dlmtr+l)}return g};dhtmlXTreeObject.prototype.selectItem=function(g,e,l){var e=convertStringToBoolean(e),k=this._globalIdStorageFind(g);if(!k||!k.parentObject){return 0}this.XMLloadingWarning?k.parentObject.openMe=1:this._openItem(k.parentObject);var h=null;if(l&&(h={ctrlKey:!0},k.i_sel)){h.skipUnSel=!0}if(e){this.onRowSelect(h,k.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1)}else{this.onRowSelect(h,k.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var d=[],c=0;c<this._selected.length;c++){d[c]=this._selected[c].span.innerHTML}return d.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(e,d){e--;for(var f=0;f<e;f++){d[f]==0&&(d[f]=d[f+1],d[f+1]=0)}};dhtmlXTreeObject.prototype._deleteNode=function(s,r,q){if(!r||!r.parentObject){return 0}var p=0,n=0;if(r.tr.nextSibling){p=r.tr.nextSibling.nodem}if(r.tr.previousSibling){n=r.tr.previousSibling.nodem}for(var o=r.parentObject,m=o.childsCount,l=o.childNodes,k=0;k<m;k++){if(l[k].id==s){q||o.htmlNode.childNodes[0].removeChild(l[k].tr);l[k]=0;break}}this._compressChildList(m,l);q||o.childsCount--;p&&(this._correctPlus(p),this._correctLine(p));n&&(this._correctPlus(n),this._correctLine(n));this.tscheck&&this._correctCheckStates(o);q||this._globalIdStorageRecSub(r)};dhtmlXTreeObject.prototype.setCheck=function(e,d){var f=this._globalIdStorageFind(e,0,1);f&&(d==="unsure"?this._setCheck(f,d):(d=convertStringToBoolean(d),this.tscheck&&this.smcheck?this._setSubChecked(d,f):this._setCheck(f,d)),this.smcheck&&this._correctCheckStates(f.parentObject))};dhtmlXTreeObject.prototype._setCheck=function(f,e){if(f){if((f.parentObject._r_logic||this._frbtr)&&e){if(this._frbtrs){this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=f}else{for(var h=0;h<f.parentObject.childsCount;h++){this._setCheck(f.parentObject.childNodes[h],0)}}}var g=f.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];f.checkstate=e=="unsure"?2:e?1:0;if(f.dscheck){f.checkstate=f.dscheck}this._setSrc(g,this.imPath+(f.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[f.checkstate])}};dhtmlXTreeObject.prototype.setSubChecked=function(e,d){var f=this._globalIdStorageFind(e);this._setSubChecked(d,f);this._correctCheckStates(f.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(f,e){f=convertStringToBoolean(f);if(e){if((e.parentObject._r_logic||this._frbtr)&&f){for(var h=0;h<e.parentObject.childsCount;h++){this._setSubChecked(0,e.parentObject.childNodes[h])}}if(e._r_logic||this._frbtr){this._setSubChecked(f,e.childNodes[0])}else{for(h=0;h<e.childsCount;h++){this._setSubChecked(f,e.childNodes[h])}}var g=e.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];e.checkstate=f?1:0;if(e.dscheck){e.checkstate=e.dscheck}this._setSrc(g,this.imPath+(e.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[e.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(d){var c=this._globalIdStorageFind(d);return !c?void 0:c.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(f){var e=this._globalIdStorageFind(f);if(e){for(var h=e.childsCount,g=0;g<h;g++){this._deleteNode(e.childNodes[0].id,e.childNodes[0])}}};dhtmlXTreeObject.prototype.deleteItem=function(e,d){if(!this._onrdlh||this._onrdlh(e)){var f=this._deleteItem(e,d)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(h,g,n){var g=convertStringToBoolean(g),m=this._globalIdStorageFind(h);if(m){var k=this.getParentId(h),l=m.parentObject;this._deleteNode(h,m,n);if(this._editCell&&this._editCell.id==h){this._editCell=null}this._correctPlus(l);this._correctLine(l);g&&k!=this.rootId&&this.selectItem(k,1);return l}};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(e){for(var d=0;d<e.childsCount;d++){this._globalIdStorageRecSub(e.childNodes[d]),this._globalIdStorageSub(e.childNodes[d].id)}this._globalIdStorageSub(e.id);var f=e;f.span=null;f.tr.nodem=null;f.tr=null;f.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(w,v,u,s,q,r,p,o,l){var n=this._globalIdStorageFind(w);if(!n||!n.parentObject){return 0}var k=this._attachChildNode(0,v,u,s,q,r,p,o,l,n);return k};dhtmlXTreeObject.prototype.getItemIdByIndex=function(e,d){var f=this._globalIdStorageFind(e);return !f||d>=f.childsCount?null:f.childNodes[d].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(e,d){var f=this._globalIdStorageFind(e);return !f||d>=f.childsCount?null:f.childNodes[d].id};dhtmlXTreeObject.prototype.setDragHandler=function(b){this.attachEvent("onDrag",b)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null}this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(d,c){d=="temporary_disabled"?(this.dADTempOff=!1,d=!0):this.dADTempOff=!0;(this.dragAndDropOff=convertStringToBoolean(d))&&this.dragger.addDragLanding(this.allTree,this);if(arguments.length>1){this._ddronr=!convertStringToBoolean(c)}};dhtmlXTreeObject.prototype._setMove=function(f){if(f.parentObject.span){var e=getAbsoluteTop(f),h=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;var g=f.parentObject.span;g.className+=" dragAndDropRow";this._lastMark=g;this._autoScroll(null,e,h)}};dhtmlXTreeObject.prototype._autoScroll=function(e,d,f){if(this.autoScroll){e&&(d=getAbsoluteTop(e),f=getAbsoluteTop(this.allTree));if(d-f-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if(d-f<parseInt(this.allTree.scrollTop)+30){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(h,g){if(!this.dADTempOff){return null}var n=h.parentObject;if(!this.callEvent("onBeforeDrag",[n.id,g])){return null}n.i_sel||this._selectItem(n,g);var m=document.createElement("div"),k=[];if(this._itim_dg){for(var l=0;l<this._selected.length;l++){k[l]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[l].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[l].span.innerHTML+"</td></tr></table>"}}else{k=this.getSelectedItemText().split(this.dlmtr)}m.innerHTML=k.join("");m.style.position="absolute";m.className="dragSpanDiv";this._dragged=[].concat(this._selected);return m};dhtmlXTreeObject.prototype._focusNode=function(d){var c=getAbsoluteTop(d.htmlNode)-getAbsoluteTop(this.allTree);if(c>this.allTree.offsetHeight-30||c<0){this.allTree.scrollTop=c+this.allTree.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(b){b&&b.preventDefault&&b.preventDefault();return !1};dhtmlXTreeObject.prototype._drag=function(l,k,r){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer);if(!r.parentObject){r=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0}this._clearMove();var q=l.parentObject.treeNod;q&&q._clearMove&&q._clearMove("");if(!this.dragMove||this.dragMove()){for(var o=!q||!q._clearMove||!q._dragged?Array(l.parentObject):q._dragged,p=r.parentObject,n=0;n<o.length;n++){var m=this._moveNode(o[n],p);this.dadmodec&&m!==!1&&(p=this._globalIdStorageFind(m,!0,!0));m&&!this._sADnD&&this.selectItem(m,0,1)}}if(q){q._dragged=[]}};dhtmlXTreeObject.prototype._dragIn=function(l,k,r,q){if(!this.dADTempOff){return 0}var o=k.parentObject,p=l.parentObject;if(p||!this._ddronr){if(!this.callEvent("onDragIn",[o.id,p?p.id:null,o.treeNod,this])){return p&&this._autoScroll(l),0}if(p){if(o.childNodes==null){return this._setMove(l,r,q),l}for(var n=o.treeNod,m=0;m<n._dragged.length;m++){if(this._checkPNodes(p,n._dragged[m])){return this._autoScroll(l),0}}this._setMove(l,r,q);if(this._getOpenState(p)<=0){this._autoOpenId=p.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1000)}}else{this.allTree.className+=" selectionBox"}return l}};dhtmlXTreeObject.prototype._autoOpenItem=function(d,c){c.openItem(c._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};dhtmlXTreeObject.prototype.moveItem=function(l,k,r,q){var o=this._globalIdStorageFind(l);if(!o){return 0}switch(k){case"right":alert("Not supported yet");break;case"item_child":var p=(q||this)._globalIdStorageFind(r);if(!p){return 0}(q||this)._moveNodeTo(o,p,0);break;case"item_sibling":p=(q||this)._globalIdStorageFind(r);if(!p){return 0}(q||this)._moveNodeTo(o,p.parentObject,p);break;case"item_sibling_next":p=(q||this)._globalIdStorageFind(r);if(!p){return 0}p.tr&&p.tr.nextSibling&&p.tr.nextSibling.nodem?(q||this)._moveNodeTo(o,p.parentObject,p.tr.nextSibling.nodem):(q||this)._moveNodeTo(o,p.parentObject);break;case"left":o.parentObject.parentObject&&this._moveNodeTo(o,o.parentObject.parentObject,o.parentObject);break;case"up":var n=this._getPrevNode(o);if(n==-1||!n.parentObject){return}this._moveNodeTo(o,n.parentObject,n);break;case"up_strict":n=this._getIndex(o);n!=0&&this._moveNodeTo(o,o.parentObject,o.parentObject.childNodes[n-1]);break;case"down_strict":var n=this._getIndex(o),m=o.parentObject.childsCount-2;n==m?this._moveNodeTo(o,o.parentObject):n<m&&this._moveNodeTo(o,o.parentObject,o.parentObject.childNodes[n+2]);break;case"down":n=this._getNextNode(this._lastChild(o));if(n==-1||!n.parentObject){return}n.parentObject==o.parentObject&&(n=this._getNextNode(n));if(n==-1){this._moveNodeTo(o,o.parentObject)}else{if(n==-1||!n.parentObject){return}this._moveNodeTo(o,n.parentObject,n)}}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"}};dhtmlXTreeObject.prototype._loadDynXML=function(e,d){var d=d||this.XMLsource,f=(new Date).valueOf();this._ld_id=e;this.loadXML(d+getUrlSymbol(d)+"id="+this._escape(e))};dhtmlXTreeObject.prototype._checkPNodes=function(d,c){return this._dcheckf?!1:c==d?1:d.parentObject?this._checkPNodes(d.parentObject,c):0};dhtmlXTreeObject.prototype.disableDropCheck=function(b){this._dcheckf=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.preventIECaching=function(b){this.no_cashe=convertStringToBoolean(b);this.XMLLoader.rSeed=this.no_cashe};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(e,d){var f=typeof e!="object"?this._globalIdStorageFind(e,0,1):e;if(f&&(f.dscheck=convertStringToBoolean(d)?(f.checkstate||0)%3+3:f.checkstate>2?f.checkstate-3:f.checkstate,this._setCheck(f),f.dscheck<3)){f.dscheck=!1}};dhtmlXTreeObject.prototype.setEscapingMode=function(b){this.utfesc=b};dhtmlXTreeObject.prototype.enableHighlighting=function(b){this.ehlt=!0;this.ehlta=convertStringToBoolean(b)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var d=this.childNodes[3].parentObject,c=d.treeNod;c.callEvent("onMouseOut",[d.id]);if(d.id==c._l_onMSI){c._l_onMSI=null}if(c.ehlta){d.span.className=d.span.className.replace("_lor","")}};dhtmlXTreeObject.prototype._itemMouseIn=function(){var d=this.childNodes[3].parentObject,c=d.treeNod;c._l_onMSI!=d.id&&c.callEvent("onMouseIn",[d.id]);c._l_onMSI=d.id;if(c.ehlta){d.span.className=d.span.className.replace("_lor",""),d.span.className=d.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")}};dhtmlXTreeObject.prototype.enableActiveImages=function(b){this._aimgs=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.focusItem=function(d){var c=this._globalIdStorageFind(d);if(!c){return 0}this._focusNode(c)};dhtmlXTreeObject.prototype.getAllSubItems=function(b){return this._getAllSubItems(b)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){var g=f.childNodes[h].unParsed?this._getAllScraggyItemsXML(f.childNodes[h].unParsed,1):this._getAllScraggyItems(f.childNodes[h]);g&&(e?e+=this.dlmtr+g:e=g)}else{e?e+=this.dlmtr+f.childNodes[h].id:e=f.childNodes[h].id}}return e};dhtmlXTreeObject.prototype._getAllFatItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){e?e+=this.dlmtr+f.childNodes[h].id:e=f.childNodes[h].id;var g=f.childNodes[h].unParsed?this._getAllFatItemsXML(f.childNodes[h].unParsed,1):this._getAllFatItems(f.childNodes[h]);g&&(e+=this.dlmtr+g)}}return e};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(b){b&&(b=this._globalIdStorageFind(b));return this._getAllChecked(b,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var d=[this._getAllChecked("","",1)],c=this._getAllChecked("","",2);c&&d.push(c);return d.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(g,e,l){if(!g){g=this.htmlNode}if(g.checkstate==l&&!g.nocheckbox){e?e+=this.dlmtr+g.id:e=g.id}for(var k=g.childsCount,h=0;h<k;h++){e=this._getAllChecked(g.childNodes[h],e,l)}return e?e:""};dhtmlXTreeObject.prototype.setItemStyle=function(f,e,h){var h=h||!1,g=this._globalIdStorageFind(f);if(!g){return 0}g.span.style.cssText?g.span.style.cssText=h?e:g.span.style.cssText+";"+e:g.span.setAttribute("style",g.span.getAttribute("style")+"; "+e)};dhtmlXTreeObject.prototype.enableImageDrag=function(b){this._itim_dg=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnDragIn=function(b){this.attachEvent("onDragIn",b)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(b){this.autoScroll=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setSkin=function(d){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+d;d=="dhx_terrace"&&this.enableTreeLines(!1)};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(b){return[b.parent,b.width||"100%",b.height||"100%",b.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(b){b.attachEvent("insertCallback",function(g,m,l){var h=this._loader.doXPath(".//item",g),k=h[0].getAttribute("text");this.obj.insertNewItem(l,m,k,0,0,0,0,"CHILD")});b.attachEvent("updateCallback",function(g,m,l){var h=this._loader.doXPath(".//item",g),k=h[0].getAttribute("text");this.obj.setItemText(m,k);this.obj.getParentId(m)!=l&&this.obj.moveItem(m,"item_child",l);this.setUpdated(m,!0,"updated")});b.attachEvent("deleteCallback",function(d,e){this.obj.setUserData(e,this.action_param,"true_deleted");this.obj.deleteItem(e,!1)});b._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(a,d){a==3&&b.setUpdated(d,!0);return !0});this.attachEvent("onDrop",function(a,l,k,g,h){g==h&&b.setUpdated(a,!0)});this._onrdlh=function(a){var d=b.getState(a);if(d=="inserted"){return b.set_invalid(a,!1),b.setUpdated(a,!1),!0}if(d=="true_deleted"){return b.setUpdated(a,!1),!0}b.setUpdated(a,!0,"deleted");return !1};this._onradh=function(a){b.setUpdated(a,!0,"inserted")};b._getRowData=function(g){for(var m={},l=this.obj._globalIdStorageFind(g),h=l.parentObject,k=0,k=0;k<h.childsCount;k++){if(h.childNodes[k]==l){break}}m.tr_id=l.id;m.tr_pid=h.id;m.tr_order=k;m.tr_text=l.span.innerHTML;h=(l._userdatalist||"").split(",");for(k=0;k<h.length;k++){m[h[k]]=l.userData["t_"+h[k]]}return m}};function jsonPointer(d,c){this.d=d;this.dp=c}jsonPointer.prototype={text:function(){var d=function(b){for(var f=[],g=0;g<b.length;g++){f.push("{"+c(b[g])+"}")}return f.join(",")},c=function(b){var a=[],f;for(f in b){typeof b[f]=="object"?f.length?a.push('"'+f+'":['+d(b[f])+"]"):a.push('"'+f+'":{'+c(b[f])+"}"):a.push('"'+f+'":"'+b[f]+'"')}return a.join(",")};return"{"+c(this.d)+"}"},get:function(b){return this.d[b]},exists:function(){return !!this.d},content:function(){return this.d.content},each:function(h,g,m){var l=this.d[h],n=new jsonPointer;if(l){for(var k=0;k<l.length;k++){n.d=l[k],g.apply(m,[n,k])}}},get_all:function(){return this.d},sub:function(b){return new jsonPointer(this.d[b],this.d)},sub_exists:function(b){return !!this.d[b]},each_x:function(k,h,o,n,p){var m=this.d[k],l=new jsonPointer(0,this.d);if(m){for(p=p||0;p<m.length;p++){if(m[p][h]&&(l.d=m[p],o.apply(n,[l,p])==-1)){break}}}},up:function(){return new jsonPointer(this.dp,this.d)},set:function(d,c){this.d[d]=c},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(s,r,p,o,q){var n=this.d[s];if(n.length){for(var m=0;m<n.length;m++){if(n[m][r]!=null&&n[m][r]!=""&&(!p||n[m][r]==p)){var l=new jsonPointer(n[m],this.d);o.apply(q,[l,m])}var k=this.d;this.d=n[m];this.sub_exists(s)&&this.through(s,r,p,o,q);this.d=k}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var d=this;this.XMLLoader=new dtmlXMLLoaderObject(function(a,c,b,g,h){eval("var z="+h.xmlDoc.responseText);d.loadJSArray(z)},this,!0,this.no_cashe);if(b){this.XMLLoader.waitCall=b}this.XMLLoader.loadXML(a)};dhtmlXTreeObject.prototype.loadCSV=function(e,c){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var f=this;this.XMLLoader=new dtmlXMLLoaderObject(function(k,n,d,m,l){f.loadCSVString(l.xmlDoc.responseText)},this,!0,this.no_cashe);if(c){this.XMLLoader.waitCall=c}this.XMLLoader.loadXML(e)};dhtmlXTreeObject.prototype.loadJSArray=function(h,g){for(var m=[],l=0;l<h.length;l++){m[h[l][1]]||(m[h[l][1]]=[]),m[h[l][1]].push({id:h[l][0],text:h[l][2]})}var n={id:this.rootId},k=function(e,f){if(m[e.id]){e.item=m[e.id];for(var d=0;d<e.item.length;d++){f(e.item[d],f)}}};k(n,k);this.loadJSONObject(n,g)};dhtmlXTreeObject.prototype.loadCSVString=function(l,k){for(var q=[],p=l.split("\n"),r=0;r<p.length;r++){var o=p[r].split(",");q[o[1]]||(q[o[1]]=[]);q[o[1]].push({id:o[0],text:o[2]})}var n={id:this.rootId},m=function(e,f){if(q[e.id]){e.item=q[e.id];for(var d=0;d<e.item.length;d++){f(e.item[d],f)}}};m(n,m);this.loadJSONObject(n,k)};dhtmlXTreeObject.prototype.loadJSONObject=function(e,c){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;var f=new jsonPointer(e);this._parse(f);this._p=f;c&&c()};dhtmlXTreeObject.prototype.loadJSON=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var d=this;this.XMLLoader=new dtmlXMLLoaderObject(function(a,c,b,g,h){try{eval("var t="+h.xmlDoc.responseText)}catch(i){dhtmlxError.throwError("LoadXML","Incorrect JSON",[h.xmlDoc,this]);return}var j=new jsonPointer(t);d._parse(j);d._p=j},this,!0,this.no_cashe);if(b){this.XMLLoader.waitCall=b}this.XMLLoader.loadXML(a)};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var e=['{"id":"'+this.rootId+'", "item":['],c=[],f=0;f<this.htmlNode.childsCount;f++){c.push(this._serializeItemJSON(this.htmlNode.childNodes[f]))}e.push(c.join(","));e.push("]}");return e.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(k){var h=[];if(k.unParsed){return k.unParsed.text()}var o=this._selected.length?this._selected[0].id:"",n=k.span.innerHTML;if(this._xescapeEntities){for(var p=0;p<this._serEnts.length;p++){n=n.replace(this._serEnts[p][2],this._serEnts[p][1])}}this._xfullXML?h.push('{ "id":"'+k.id+'", '+(this._getOpenState(k)==1?' "open":"1", ':"")+(o==k.id?' "select":"1",':"")+' "text":"'+n+'", "im0":"'+k.images[0]+'", "im1":"'+k.images[1]+'", "im2":"'+k.images[2]+'" '+(k.acolor?', "aCol":"'+k.acolor+'" ':"")+(k.scolor?', "sCol":"'+k.scolor+'" ':"")+(k.checkstate==1?', "checked":"1" ':k.checkstate==2?', "checked":"-1"':"")+(k.closeable?', "closeable":"1" ':"")+(this.XMLsource&&k.XMLload==0?', "child":"1" ':"")):h.push('{ "id":"'+k.id+'", '+(this._getOpenState(k)==1?' "open":"1", ':"")+(o==k.id?' "select":"1",':"")+' "text":"'+n+'"'+(this.XMLsource&&k.XMLload==0?', "child":"1" ':""));if(this._xuserData&&k._userdatalist){h.push(', "userdata":[');for(var m=k._userdatalist.split(","),l=[],p=0;p<m.length;p++){l.push('{ "name":"'+m[p]+'" , "content":"'+k.userData["t_"+m[p]]+'" }')}h.push(l.join(","));h.push("]")}if(k.childsCount){h.push(', "item":[');l=[];for(p=0;p<k.childsCount;p++){l.push(this._serializeItemJSON(k.childNodes[p]))}h.push(l.join(","));h.push("]\n")}h.push("}\n");return h.join("")};
function xmlPointer(a){this.d=a}
xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;var a=new XMLSerializer;return a.serializeToString(this.d)},get:function(a){return this.d.getAttribute(a)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(a,b,c,d){var f=this.d.childNodes,e=new xmlPointer;if(f.length)for(d=d||0;d<f.length;d++)if(f[d].tagName==a&&(e.d=f[d],b.apply(c,[e,d])==-1))break},get_all:function(){for(var a={},b=this.d.attributes,c=0;c<b.length;c++)a[b[c].name]=
b[c].value;return a},sub:function(a){var b=this.d.childNodes,c=new xmlPointer;if(b.length)for(var d=0;d<b.length;d++)if(b[d].tagName==a)return c.d=b[d],c},up:function(){return new xmlPointer(this.d.parentNode)},set:function(a,b){this.d.setAttribute(a,b)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(a){var b=this.d.childNodes;if(b.length)for(var c=0;c<b.length;c++)if(b[c].tagName==a)return!0;return!1},through:function(a,b,c,d,f){var e=this.d.childNodes;if(e.length)for(var g=
0;g<e.length;g++){if(e[g].tagName==a&&e[g].getAttribute(b)!=null&&e[g].getAttribute(b)!=""&&(!c||e[g].getAttribute(b)==c)){var h=new xmlPointer(e[g]);d.apply(f,[h,g])}var j=this.d;this.d=e[g];this.through(a,b,c,d,f);this.d=j}}};
function dhtmlXTreeObject(a,b,c,d){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}this.parentObject=typeof a!="object"?document.getElementById(a):a;this.parentObject.style.overflow="hidden";this._itim_dg=!0;this.dlmtr=",";this.dropLower=!1;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=!0;this.width=b;this.height=c;this.rootId=d;this.childCalc=null;this.def_line_img_y=this.def_line_img_x=this.def_img_y=this.def_img_x="18px";this._dragged=[];this._selected=
[];this.style_pointer="pointer";this._aimgs=!0;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.mlitems=this.cMenu=0;this.iconURL="";this.dadmode=0;this.slowParse=!1;this.autoScroll=!0;this.hfMode=0;this.nodeCut=[];this.XMLloadingWarning=this.XMLsource=0;this._idpull={};this._pullSize=0;this.treeLinesOn=!0;this.tscheck=!1;this.timgen=!0;this.dpcpy=!1;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray="iconUncheckAll.gif,iconCheckAll.gif,iconCheckGray.gif,iconUncheckDis.gif,iconCheckDis.gif,iconCheckDis.gif".split(",");
this.radioArray="radio_off.gif,radio_on.gif,radio_on.gif,radio_off.gif,radio_on.gif,radio_on.gif".split(",");this.lineArray="line2.gif,line3.gif,line4.gif,blank.gif,blank.gif,line1.gif".split(",");this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"];this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"];this.imageArray=["leaf.gif","folderOpen.gif","folderClosed.gif"];this.cutImg=[0,0,0];this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=
new dhtmlDragAndDropObject;this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);if(_isFF)this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden";var e=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS)this.allTree.oncontextmenu=
function(a){return e._doContClick(a||window.event,!0)};this.allTree.onmousedown=function(a){return e._doContClick(a||window.event)};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);_isIE&&this.preventIECashing(!0);window.addEventListener&&window.addEventListener("unload",function(){try{e.destructor()}catch(a){}},!1);window.attachEvent&&window.attachEvent("onunload",function(){try{e.destructor()}catch(a){}});this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;
dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}dhtmlXTreeObject.prototype.setDataMode=function(a){this._datamode=a};
dhtmlXTreeObject.prototype._doContClick=function(a,b){if(!b&&a.button!=2)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var c=_isIE?a.srcElement:a.target;c&&c.tagName!="BODY";){if(c.parentObject)break;c=c.parentNode}if(!c||!c.parentObject)return!0;var d=c.parentObject;if(!this.callEvent("onRightClick",[d.id,a]))(a.srcElement||a.target).oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1};if(this._acMenu=d.cMenu||this.cMenu){if(!this.callEvent("onBeforeContextMenu",
[d.id]))return!0;(a.srcElement||a.target).oncontextmenu=function(a){(a||event).cancelBubble=!0;return!1};if(this._acMenu.showContextMenu){var f=window.document.documentElement,e=window.document.body,g=[f.scrollLeft||e.scrollLeft,f.scrollTop||e.scrollTop];if(_isIE)var h=a.clientX+g[0],j=a.clientY+g[1];else h=a.pageX,j=a.pageY;this._acMenu.showContextMenu(h-1,j-1);this.contextID=d.id;a.cancelBubble=!0;this._acMenu._skip_hide=!0}else c.contextMenuId=d.id,c.contextMenu=this._acMenu,c.a=this._acMenu._contextStart,
c.a(c,a),c.a=null;return!1}return!0};
dhtmlXTreeObject.prototype.enableIEImageFix=function(a){a?(this._getImg=function(){var a=document.createElement("DIV");a.innerHTML="&nbsp;";a.className="dhx_bg_img_fix";return a},this._setSrc=function(a,c){a.style.backgroundImage="url("+c+")"},this._getSrc=function(a){var c=a.style.backgroundImage;return c.substr(4,c.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(a){return document.createElement(a==this.rootId?"div":"img")},this._setSrc=function(a,c){a.src=c},this._getSrc=function(a){return a.src})};
dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var b=this._idpull[a];if(b)b.parentObject=null,b.treeNod=null,b.childNodes=null,b.span=null,b.tr.nodem=null,b.tr=null,b.htmlNode.objBelong=null,b.htmlNode=null,this._idpull[a]=null}this.parentObject.innerHTML="";this.XMLLoader&&this.XMLLoader.destructor();this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(a in this)this[a]=null};function cObject(){return this}
cObject.prototype={};cObject.prototype.clone=function(){function a(){}a.prototype=this;return new a};
function dhtmlXTreeItemObject(a,b,c,d,f,e){this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=d;this.label=b;this.parentObject=c;this.actionHandler=f;this.images=[d.imageArray[0],d.imageArray[1],d.imageArray[2]];this.id=d._globalIdStorageAdd(a,this);this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,e):this.treeNod._createItem(0,
this,e);this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(a,b){if(this._globalIdStorageFind(a,1,1))return a=a+"_"+(new Date).valueOf(),this._globalIdStorageAdd(a,b);this._idpull[a]=b;this._pullSize++;return a};dhtmlXTreeObject.prototype._globalIdStorageSub=function(a){this._idpull[a]&&(this._unselectItem(this._idpull[a]),this._idpull[a]=null,this._pullSize--);this._locker&&this._locker[a]&&(this._locker[a]=!1)};
dhtmlXTreeObject.prototype._globalIdStorageFind=function(a){var b=this._idpull[a];return b?b:null};dhtmlXTreeObject.prototype._escape=function(a){switch(this.utfesc){case "none":return a;case "utf8":return encodeURIComponent(a);default:return escape(a)}};
dhtmlXTreeObject.prototype._drawNewTr=function(a){var b=document.createElement("tr"),c=document.createElement("td"),d=document.createElement("td");c.appendChild(document.createTextNode(" "));d.colSpan=3;d.appendChild(a);b.appendChild(c);b.appendChild(d);return b};dhtmlXTreeObject.prototype.loadXMLString=function(a,b){var c=this;this.parsCount||this.callEvent("onXLS",[c,null]);this.xmlstate=1;if(b)this.XMLLoader.waitCall=b;this.XMLLoader.loadXMLString(a)};
dhtmlXTreeObject.prototype.loadXML=function(a,b){if(this._datamode&&this._datamode!="xml")return this["load"+this._datamode.toUpperCase()](a,b);var c=this;this.parsCount||this.callEvent("onXLS",[c,this._ld_id]);this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);if(b)this.XMLLoader.waitCall=b;this.XMLLoader.loadXML(a)};
dhtmlXTreeObject.prototype._attachChildNode=function(a,b,c,d,f,e,g,h,j,i,m){if(i&&i.parentObject)a=i.parentObject;if(a.XMLload==0&&this.XMLsource&&!this.XMLloadingWarning)a.XMLload=1,this._loadDynXML(a.id);var l=a.childsCount,k=a.childNodes;if(m&&m.tr.previousSibling)m.tr.previousSibling.previousSibling?i=m.tr.previousSibling.nodem:h=h.replace("TOP","")+",TOP";if(i){var o,r;for(o=0;o<l;o++)if(k[o]==i){for(r=l;r!=o;r--)k[1+r]=k[r];break}o++;l=o}if(h)for(var s=h.split(","),p=0;p<s.length;p++)switch(s[p]){case "TOP":if(a.childsCount>
0)i={},i.tr=a.childNodes[0].tr.previousSibling;a._has_top=!0;for(o=l;o>0;o--)k[o]=k[o-1];l=0}var n;if(!(n=this._idpull[b])||n.span!=-1)n=k[l]=new dhtmlXTreeItemObject(b,c,a,this,d,1),b=k[l].id,a.childsCount++;if(!n.htmlNode)n.label=c,n.htmlNode=this._createItem(this.checkBoxOff?1:0,n),n.htmlNode.objBelong=n;f&&(n.images[0]=f);e&&(n.images[1]=e);g&&(n.images[2]=g);var q=this._drawNewTr(n.htmlNode);if(this.XMLloadingWarning||this._hAdI)n.htmlNode.parentNode.parentNode.style.display="none";i&&i.tr&&
i.tr.nextSibling?a.htmlNode.childNodes[0].insertBefore(q,i.tr.nextSibling):this.parsingOn==a.id?this.parsedArray[this.parsedArray.length]=q:a.htmlNode.childNodes[0].appendChild(q);i&&!i.span&&(i=null);if(this.XMLsource)n.XMLload=j&&j!=0?0:1;n.tr=q;q.nodem=n;if(a.itemId==0)q.childNodes[0].className="hiddenRow";(a._r_logic||this._frbtr)&&this._setSrc(n.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);if(h){s=h.split(",");for(p=0;p<s.length;p++)switch(s[p]){case "SELECT":this.selectItem(b,
!1);break;case "CALL":this.selectItem(b,!0);break;case "CHILD":n.XMLload=0;break;case "CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+b:this.setCheck(b,1);break;case "HCHECKED":this._setCheck(n,"unsure");break;case "OPEN":n.openMe=1}}if(!this.XMLloadingWarning&&(this._getOpenState(a)<0&&!this._hAdI&&this.openItem(a.id),i&&(this._correctPlus(i),this._correctLine(i)),this._correctPlus(a),this._correctLine(a),this._correctPlus(n),a.childsCount>=2&&(this._correctPlus(k[a.childsCount-2]),
this._correctLine(k[a.childsCount-2])),a.childsCount!=2&&this._correctPlus(k[0]),this.tscheck&&this._correctCheckStates(a),this._onradh))if(this.xmlstate==1){var t=this.onXLE;this.onXLE=function(a){this._onradh(b);t&&t(a)}}else this._onradh(b);return n};dhtmlXTreeObject.prototype.insertNewItem=function(a,b,c,d,f,e,g,h,j){var i=this._globalIdStorageFind(a);if(!i)return-1;var m=this._attachChildNode(i,b,c,d,f,e,g,h,j);if(!this._idpull[this.rootId].XMLload)this._idpull[this.rootId].XMLload=1;return m};
dhtmlXTreeObject.prototype.insertNewChild=function(a,b,c,d,f,e,g,h,j){return this.insertNewItem(a,b,c,d,f,e,g,h,j)};dhtmlXTreeObject.prototype._parseXMLTree=function(a,b,c,d,f){var e=new xmlPointer(f.getXMLTopNode("tree"));a._parse(e);a._p=e};
dhtmlXTreeObject.prototype._parseItem=function(a,b,c,d){var f;if(this._srnd&&(!this._idpull[f=a.get("id")]||!this._idpull[f].span))this._addItemSRND(b.id,f,a);else{var e=a.get_all();if(typeof this.waitUpdateXML=="object"&&!this.waitUpdateXML[e.id])this._parse(a,e.id,1);else{var g=[];e.select&&g.push("SELECT");e.top&&g.push("TOP");if(e.call)this.nodeAskingCall=e.id;e.checked==-1?g.push("HCHECKED"):e.checked&&g.push("CHECKED");e.open&&g.push("OPEN");if(this.waitUpdateXML)if(this._globalIdStorageFind(e.id))var h=
this.updateItem(e.id,e.text,e.im0,e.im1,e.im2,e.checked,e.child);else this.npl==0?g.push("TOP"):c=b.childNodes[this.npl],h=this._attachChildNode(b,e.id,e.text,0,e.im0,e.im1,e.im2,g.join(","),e.child,0,c),e.id=h.id,c=null;else h=this._attachChildNode(b,e.id,e.text,0,e.im0,e.im1,e.im2,g.join(","),e.child,d||0,c);if(e.tooltip)h.span.parentNode.parentNode.title=e.tooltip;e.style&&(h.span.style.cssText?h.span.style.cssText+=";"+e.style:h.span.setAttribute("style",h.span.getAttribute("style")+"; "+e.style));
if(e.radio)h._r_logic=!0;if(e.nocheckbox){var j=h.span.parentNode.previousSibling.previousSibling;j.childNodes[0].style.display="none";if(window._KHTMLrv)j.style.display="none";h.nocheckbox=!0}e.disabled&&(e.checked!=null&&this._setCheck(h,e.checked),this.disableCheckbox(h,1));h._acc=e.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,a,e,b?b.id:0);this.setItemColor(h,e.aCol,e.sCol);e.locked=="1"&&this.lockItem(h.id,!0,!0);(e.imwidth||e.imheight)&&this.setIconSize(e.imwidth,
e.imheight,h);(e.closeable=="0"||e.closeable=="1")&&this.setItemCloseable(h,e.closeable);var i="";e.topoffset&&this.setItemTopOffset(h,e.topoffset);if(!this.slowParse||typeof this.waitUpdateXML=="object")a.sub_exists("item")&&(i=this._parse(a,e.id,1));if(i!="")this.nodeAskingCall=i;a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this)}}};
dhtmlXTreeObject.prototype._parse=function(a,b,c,d){if(this._srnd&&!this.parentObject.offsetHeight){var f=this;return window.setTimeout(function(){f._parse(a,b,c,d)},100)}if(a.exists()){this.skipLock=!0;if(!b){var b=a.get("id"),e=a.get("dhx_security");if(e)dhtmlx.security_key=e;if(a.get("radio"))this.htmlNode._r_logic=!0;this.parsingOn=b;this.parsedArray=[];this.nodeAskingCall=this.setCheckList=""}var g=this._globalIdStorageFind(b);if(!g)return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");
this.parsCount=this.parsCount?this.parsCount+1:1;this.XMLloadingWarning=1;var h=g.childsCount&&!d&&!this._edsbps&&!g._has_top?0:0;this.npl=0;a.each("item",function(a){g.XMLload=1;this._parseItem(a,g,0,h);this.npl++},this,d);if(!c){a.each("userdata",function(b){this.setUserData(a.get("id"),b.get("name"),b.content())},this);g.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=!1;for(var j=g.childsCount-1;j>=0;j--)g.childNodes[j]._dmark&&this.deleteItem(g.childNodes[j].id)}for(var i=this._globalIdStorageFind(this.parsingOn),
j=0;j<this.parsedArray.length;j++)g.htmlNode.childNodes[0].appendChild(this.parsedArray[j]);this.parsedArray=[];this.lastLoadedXMLId=b;this.XMLloadingWarning=0;for(var m=this.setCheckList.split(this.dlmtr),l=0;l<m.length;l++)m[l]&&this.setCheck(m[l],1);this.XMLsource&&this.tscheck&&this.smcheck&&g.id!=this.rootId&&(g.checkstate===0?this._setSubChecked(0,g):g.checkstate===1&&this._setSubChecked(1,g));this._redrawFrom(this,null,d);a.get("order")&&a.get("order")!="none"&&this._reorderBranch(g,a.get("order"),
!0);this.nodeAskingCall!=""&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);this._branchUpdate&&this._branchUpdateNext(a)}if(this.parsCount==1){this.parsingOn=null;if(!this._edsbps||!this._edsbpsA.length){var k=this;window.setTimeout(function(){k.callEvent("onXLE",[k,b])},1);this.xmlstate=0}this.skipLock=!1}this.parsCount--;if(!c&&this.onXLE)this.onXLE(this,b);return this.nodeAskingCall}};
dhtmlXTreeObject.prototype._branchUpdateNext=function(a){a.each("item",function(a){var c=a.get("id");if(!this._idpull[c]||this._idpull[c].XMLload)this._branchUpdate++,this.smartRefreshItem(a.get("id"),a)},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(a,b){if(a.nodeType==1&&a.tagName=="userdata"){var c=a.getAttribute("name");c&&a.childNodes[0]&&this.setUserData(b,c,a.childNodes[0].data)}};
dhtmlXTreeObject.prototype._redrawFrom=function(a,b,c,d){if(b)f=b;else{var f=a._globalIdStorageFind(a.lastLoadedXMLId);a.lastLoadedXMLId=-1;if(!f)return 0}for(var e=0,g=c?c-1:0;g<f.childsCount;g++){if(!this._branchUpdate||this._getOpenState(f)==1)if(!b||d==1)f.childNodes[g].htmlNode.parentNode.parentNode.style.display="";if(f.childNodes[g].openMe==1)this._openItem(f.childNodes[g]),f.childNodes[g].openMe=0;a._redrawFrom(a,f.childNodes[g])}if(!f.unParsed&&(f.XMLload||!this.XMLsource))f._acc=e;a._correctLine(f);
a._correctPlus(f)};dhtmlXTreeObject.prototype._createSelf=function(){var a=document.createElement("div");a.className="containerTableStyle";a.style.width=this.width;a.style.height=this.height;this.parentObject.appendChild(a);return a};
dhtmlXTreeObject.prototype._xcloseAll=function(a){if(!a.unParsed){if(this.rootId!=a.id){if(!a.htmlNode)return;for(var b=a.htmlNode.childNodes[0].childNodes,c=b.length,d=1;d<c;d++)b[d].style.display="none";this._correctPlus(a)}for(d=0;d<a.childsCount;d++)a.childNodes[d].childsCount&&this._xcloseAll(a.childNodes[d])}};dhtmlXTreeObject.prototype._xopenAll=function(a){this._HideShow(a,2);for(var b=0;b<a.childsCount;b++)this._xopenAll(a.childNodes[b])};
dhtmlXTreeObject.prototype._correctPlus=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,c=a.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],d=this.lineArray;if(this.XMLsource&&!a.XMLload){if(d=this.plusArray,this._setSrc(c,this.iconURL+a.images[2]),this._txtimg)return b.innerHTML="[+]"}else if(a.childsCount||a.unParsed)if(a.htmlNode.childNodes[0].childNodes[1]&&a.htmlNode.childNodes[0].childNodes[1].style.display!="none"){if(!a.wsign)d=
this.minusArray;this._setSrc(c,this.iconURL+a.images[1]);if(this._txtimg)return b.innerHTML="[-]"}else{if(!a.wsign)d=this.plusArray;this._setSrc(c,this.iconURL+a.images[2]);if(this._txtimg)return b.innerHTML="[+]"}else this._setSrc(c,this.iconURL+a.images[0]);var f=2;a.treeNod.treeLinesOn?(a.parentObject&&(f=this._getCountStatus(a.id,a.parentObject)),this._setSrc(b,this.imPath+d[f])):this._setSrc(b,this.imPath+d[3])}};
dhtmlXTreeObject.prototype._correctLine=function(a){if(a.htmlNode){var b=a.parentObject;if(b)if(this._getLineStatus(a.id,b)==0||!this.treeLinesOn)for(var c=1;c<=a.childsCount;c++){if(!a.htmlNode.childNodes[0].childNodes[c])break;a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage="";a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat=""}else for(c=1;c<=a.childsCount;c++){if(!a.htmlNode.childNodes[0].childNodes[c])break;a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundImage=
"url("+this.imPath+this.lineArray[5]+")";a.htmlNode.childNodes[0].childNodes[c].childNodes[0].style.backgroundRepeat="repeat-y"}}};dhtmlXTreeObject.prototype._getCountStatus=function(a,b){return b.childsCount<=1?b.id==this.rootId?4:0:b.childNodes[0].id==a?b.id==this.rootId?2:1:b.childNodes[b.childsCount-1].id==a?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(a,b){return b.childNodes[b.childsCount-1].id==a?0:1};
dhtmlXTreeObject.prototype._HideShow=function(a,b){if(this.XMLsource&&!a.XMLload){if(b!=1)a.XMLload=1,this._loadDynXML(a.id)}else{var c=a.htmlNode.childNodes[0].childNodes,d=c.length;if(d>1){(c[1].style.display!="none"||b==1)&&b!=2?(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none"):nodestyle="";for(var f=1;f<d;f++)c[f].style.display=nodestyle}this._correctPlus(a)}};
dhtmlXTreeObject.prototype._getOpenState=function(a){if(!a.htmlNode)return 0;var b=a.htmlNode.childNodes[0].childNodes;return b.length<=1?0:b[1].style.display!="none"?1:-1};
dhtmlXTreeObject.prototype.onRowClick2=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onDblClick",[this.parentObject.id,a]))return!1;this.parentObject.closeble&&this.parentObject.closeble!="0"?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2);if(a.checkEvent("onOpenEnd"))a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)]);return!1};
dhtmlXTreeObject.prototype.onRowClick=function(){var a=this.parentObject.treeNod;if(!a.callEvent("onOpenStart",[this.parentObject.id,a._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&this.parentObject.closeble!="0"?a._HideShow(this.parentObject):a._HideShow(this.parentObject,2);if(a.checkEvent("onOpenEnd"))a.xmlstate?(a._oie_onXLE.push(a.onXLE),a.onXLE=a._epnFHe):a.callEvent("onOpenEnd",[this.parentObject.id,a._getOpenState(this.parentObject)])};
dhtmlXTreeObject.prototype._epnFHe=function(a,b,c){b!=this.rootId&&this.callEvent("onOpenEnd",[b,a.getOpenState(b)]);a.onXLE=a._oie_onXLE.pop();if(!c&&!a._oie_onXLE.length&&a.onXLE)a.onXLE(a,b)};dhtmlXTreeObject.prototype.onRowClickDown=function(a){var a=a||window.event,b=this.parentObject.treeNod;b._selectItem(this.parentObject,a)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var a=[],b=0;b<this._selected.length;b++)a[b]=this._selected[b].id;return a.join(this.dlmtr)};
dhtmlXTreeObject.prototype._selectItem=function(a){if(this.checkEvent("onSelect"))this._onSSCFold=this.getSelectedItemId();this._unselectItems();this._markItem(a);if(this.checkEvent("onSelect")){var b=this.getSelectedItemId();b!=this._onSSCFold&&this.callEvent("onSelect",[b])}};dhtmlXTreeObject.prototype._markItem=function(a){if(a.scolor)a.span.style.color=a.scolor;a.span.className="selectedTreeRow";a.i_sel=!0;this._selected[this._selected.length]=a};
dhtmlXTreeObject.prototype.getIndexById=function(a){var b=this._globalIdStorageFind(a);return!b?null:this._getIndex(b)};dhtmlXTreeObject.prototype._getIndex=function(a){for(var b=a.parentObject,c=0;c<b.childsCount;c++)if(b.childNodes[c]==a)return c};dhtmlXTreeObject.prototype._unselectItem=function(a){if(a&&a.i_sel){a.span.className="standartTreeRow";if(a.acolor)a.span.style.color=a.acolor;a.i_sel=!1;for(var b=0;b<this._selected.length;b++)if(!this._selected[b].i_sel){this._selected.splice(b,1);break}}};
dhtmlXTreeObject.prototype._unselectItems=function(){for(var a=0;a<this._selected.length;a++){var b=this._selected[a];b.span.className="standartTreeRow";if(b.acolor)b.span.style.color=b.acolor;b.i_sel=!1}this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(a,b,c){var a=a||window.event,d=this.parentObject;if(b)d=b.parentObject;var f=d.treeNod,e=f.getSelectedItemId();(!a||!a.skipUnSel)&&f._selectItem(d,a);c||(d.actionHandler?d.actionHandler(d.id,e):f.callEvent("onClick",[d.id,e]))};
dhtmlXTreeObject.prototype._correctCheckStates=function(a){if(this.tscheck&&a&&a.id!=this.rootId){var b=a.childNodes,c=0,d=0;if(a.childsCount!=0){for(var f=0;f<a.childsCount;f++)if(!b[f].dscheck)if(b[f].checkstate==0)c=1;else if(b[f].checkstate==1)d=1;else{d=c=1;break}c&&d?this._setCheck(a,"unsure"):c?this._setCheck(a,!1):this._setCheck(a,!0);this._correctCheckStates(a.parentObject)}}};
dhtmlXTreeObject.prototype.onCheckBoxClick=function(){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){if(this.parentObject.dscheck)return!0;this.treeNod.tscheck?this.parentObject.checkstate==1?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):this.parentObject.checkstate==1?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0);this.treeNod._correctCheckStates(this.parentObject.parentObject);
return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])}};
dhtmlXTreeObject.prototype._createItem=function(a,b,c){var d=document.createElement("table");d.cellSpacing=0;d.cellPadding=0;d.border=0;if(this.hfMode)d.style.tableLayout="fixed";d.style.margin=0;d.style.padding=0;var f=document.createElement("tbody"),e=document.createElement("tr"),g=document.createElement("td");g.className="standartTreeImage";if(this._txtimg){var h=document.createElement("div");g.appendChild(h);h.className="dhx_tree_textSign"}else{h=this._getImg(b.id);h.border="0";if(h.tagName==
"IMG")h.align="absmiddle";g.appendChild(h);h.style.padding=0;h.style.margin=0;h.style.width=this.def_line_img_x;h.style.height=this.def_line_img_y}var j=document.createElement("td"),i=this._getImg(this.cBROf?this.rootId:b.id);i.checked=0;this._setSrc(i,this.imPath+this.checkArray[0]);i.style.width="16px";i.style.height="16px";if(!a)(!_isIE?j:i).style.display="none";j.appendChild(i);if(!this.cBROf&&i.tagName=="IMG")i.align="absmiddle";i.onclick=this.onCheckBoxClick;i.treeNod=this;i.parentObject=b;
j.width=window._KHTMLrv?"16px":"20px";var m=document.createElement("td");m.className="standartTreeImage";var l=this._getImg(this.timgen?b.id:this.rootId);l.onmousedown=this._preventNsDrag;l.ondragstart=this._preventNsDrag;l.border="0";if(this._aimgs){l.parentObject=b;if(l.tagName=="IMG")l.align="absmiddle";l.onclick=this.onRowSelect}c||this._setSrc(l,this.iconURL+this.imageArray[0]);m.appendChild(l);l.style.padding=0;l.style.margin=0;if(this.timgen)m.style.width=l.style.width=this.def_img_x,l.style.height=
this.def_img_y;else if(l.style.width="0px",l.style.height="0px",_isOpera||window._KHTMLrv)m.style.display="none";var k=document.createElement("td");k.className="standartTreeRow";b.span=document.createElement("span");b.span.className="standartTreeRow";this.mlitems?(b.span.style.width=this.mlitems,b.span.style.display="block"):k.noWrap=!0;k.style.width="100%";/* if(_isIE&&_isIE>7)k.style.width="999999px";else if(!window._KHTMLrv)k.style.width="100%"; */b.span.innerHTML=b.label;k.appendChild(b.span);k.parentObject=b;g.parentObject=
b;k.onclick=this.onRowSelect;g.onclick=this.onRowClick;k.ondblclick=this.onRowClick2;if(this.ettip)e.title=b.label;if(this.dragAndDropOff){if(this._aimgs)this.dragger.addDraggableItem(m,this),m.parentObject=b;this.dragger.addDraggableItem(k,this)}b.span.style.paddingLeft="5px";b.span.style.paddingRight="5px";k.style.verticalAlign="";k.style.fontSize="10pt";k.style.cursor=this.style_pointer;e.appendChild(g);e.appendChild(j);e.appendChild(m);e.appendChild(k);f.appendChild(e);d.appendChild(f);if(this.ehlt||
this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))e.onmousemove=this._itemMouseIn,e[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut;return d};dhtmlXTreeObject.prototype.setImagePath=function(a){this.iconURL=this.imPath=a};dhtmlXTreeObject.prototype.setIconPath=function(a){this.iconURL=a};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(a){this.attachEvent("onRightClick",a)};dhtmlXTreeObject.prototype.setOnClickHandler=function(a){this.attachEvent("onClick",a)};
dhtmlXTreeObject.prototype.setOnSelectStateChange=function(a){this.attachEvent("onSelect",a)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(a){this.XMLsource=a};dhtmlXTreeObject.prototype.setOnCheckHandler=function(a){this.attachEvent("onCheck",a)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(a){this.attachEvent("onOpenStart",a)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(a){this.attachEvent("onOpenStart",a)};
dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(a){this.attachEvent("onOpenEnd",a)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(a){this.attachEvent("onDblClick",a)};dhtmlXTreeObject.prototype.openAllItems=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;this._xopenAll(b)};dhtmlXTreeObject.prototype.getOpenState=function(a){var b=this._globalIdStorageFind(a);return!b?"":this._getOpenState(b)};
dhtmlXTreeObject.prototype.closeAllItems=function(a){if(a===window.undefined)a=this.rootId;var b=this._globalIdStorageFind(a);if(!b)return 0;this._xcloseAll(b);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};
dhtmlXTreeObject.prototype.setUserData=function(a,b,c){var d=this._globalIdStorageFind(a,0,!0);if(d){if(b=="hint")d.htmlNode.childNodes[0].childNodes[0].title=c;if(typeof d.userData["t_"+b]=="undefined")d._userdatalist?d._userdatalist+=","+b:d._userdatalist=b;d.userData["t_"+b]=c}};dhtmlXTreeObject.prototype.getUserData=function(a,b){var c=this._globalIdStorageFind(a,0,!0);return!c?void 0:c.userData["t_"+b]};
dhtmlXTreeObject.prototype.getItemColor=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;var c={};if(b.acolor)c.acolor=b.acolor;if(b.scolor)c.scolor=b.scolor;return c};dhtmlXTreeObject.prototype.setItemColor=function(a,b,c){var d=a&&a.span?a:this._globalIdStorageFind(a);if(d){if(d.i_sel){if(c)d.span.style.color=c}else if(b)d.span.style.color=b;if(c)d.scolor=c;if(b)d.acolor=b}else return 0};
dhtmlXTreeObject.prototype.getItemText=function(a){var b=this._globalIdStorageFind(a);return!b?0:b.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML};dhtmlXTreeObject.prototype.getParentId=function(a){var b=this._globalIdStorageFind(a);return!b||!b.parentObject?"":b.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(a,b){if(a!=b){var c=this._globalIdStorageFind(a);if(!c)return 0;c.id=b;c.span.contextMenuId=b;this._idpull[b]=this._idpull[a];delete this._idpull[a]}};
dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut();this.nodeCut=[].concat(this._selected);for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b._cimgs=[];b._cimgs[0]=b.images[0];b._cimgs[1]=b.images[1];b._cimgs[2]=b.images[2];b.images[0]=b.images[1]=b.images[2]=this.cutImage;this._correctPlus(b)}};
dhtmlXTreeObject.prototype.doPaste=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;for(var c=0;c<this.nodeCut.length;c++)this._checkPNodes(b,this.nodeCut[c])||this._moveNode(this.nodeCut[c],b);this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var a=0;a<this.nodeCut.length;a++){var b=this.nodeCut[a];b.images[0]=b._cimgs[0];b.images[1]=b._cimgs[1];b.images[2]=b._cimgs[2];this._correctPlus(b)}this.nodeCut=[]};
dhtmlXTreeObject.prototype._moveNode=function(a,b){return this._moveNodeTo(a,b)};dhtmlXTreeObject.prototype._fixNodesCollection=function(a,b){var c=0,d=0,f=a.childNodes,e=a.childsCount-1;if(b!=f[e]){for(var g=0;g<e;g++)f[g]==f[e]&&(f[g]=f[g+1],f[g+1]=f[e]);for(g=0;g<e+1;g++)if(c){var h=f[g];f[g]=c;c=h}else f[g]==b&&(c=f[g],f[g]=f[e])}};
dhtmlXTreeObject.prototype._recreateBranch=function(a,b,c){var d,f="";if(c){for(d=0;d<b.childsCount;d++)if(b.childNodes[d]==c)break;d!=0?c=b.childNodes[d-1]:(f="TOP",c="")}var e=this._onradh;this._onradh=null;var g=this._attachChildNode(b,a.id,a.label,0,a.images[0],a.images[1],a.images[2],f,0,c);g._userdatalist=a._userdatalist;g.userData=a.userData.clone();g.XMLload=a.XMLload;if(e)this._onradh=e,this._onradh(g.id);for(d=0;d<a.childsCount;d++)this._recreateBranch(a.childNodes[d],g,0,1);return g};
dhtmlXTreeObject.prototype._moveNodeTo=function(a,b,c){if(a.treeNod._nonTrivialNode)return a.treeNod._nonTrivialNode(this,b,c,a);if(this._checkPNodes(b,a))return!1;var d=b.mytype?a.treeNod.lWin!=b.lWin:a.treeNod.lWin!=b.treeNod.lWin;if(!this.callEvent("onDrag",[a.id,b.id,c?c.id:null,a.treeNod,b.treeNod]))return!1;if(b.XMLload==0&&this.XMLsource)b.XMLload=1,this._loadDynXML(b.id);this.openItem(b.id);var f=a.treeNod,e=a.parentObject.childsCount,g=a.parentObject;if(d||f.dpcpy){var h=a.id,a=this._recreateBranch(a,
b,c);f.dpcpy||f.deleteItem(h)}else{var j=b.childsCount,i=b.childNodes;if(j==0)b._open=!0;f._unselectItem(a);i[j]=a;a.treeNod=b.treeNod;b.childsCount++;var m=this._drawNewTr(i[j].htmlNode);c?(b.htmlNode.childNodes[0].insertBefore(m,c.tr),this._fixNodesCollection(b,c),i=b.childNodes):(b.htmlNode.childNodes[0].appendChild(m),this.dadmode==1&&this._fixNodesCollection(b,c))}if(!f.dpcpy&&!d){var l=a.tr;document.all&&navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1?window.setTimeout(function(){l.parentNode.removeChild(l)},
250):a.parentObject.htmlNode.childNodes[0].removeChild(a.tr);if(!c||b!=a.parentObject)for(var k=0;k<g.childsCount;k++){if(g.childNodes[k].id==a.id){g.childNodes[k]=0;break}}else g.childNodes[g.childsCount-1]=0;f._compressChildList(g.childsCount,g.childNodes);g.childsCount--}if(!d&&!f.dpcpy){a.tr=m;m.nodem=a;a.parentObject=b;if(f!=b.treeNod){if(a.treeNod._registerBranch(a,f))return;this._clearStyles(a);this._redrawFrom(this,a.parentObject);this._onradh&&this._onradh(a.id)}this._correctPlus(b);this._correctLine(b);
this._correctLine(a);this._correctPlus(a);c?this._correctPlus(c):b.childsCount>=2&&(this._correctPlus(i[b.childsCount-2]),this._correctLine(i[b.childsCount-2]));this._correctPlus(i[b.childsCount-1]);this.tscheck&&this._correctCheckStates(b);f.tscheck&&f._correctCheckStates(g)}e>1&&(f._correctPlus(g.childNodes[e-2]),f._correctLine(g.childNodes[e-2]));f._correctPlus(g);f._correctLine(g);this.callEvent("onDrop",[a.id,b.id,c?c.id:null,f,b.treeNod]);return a.id};
dhtmlXTreeObject.prototype._clearStyles=function(a){if(a.htmlNode){var b=a.htmlNode.childNodes[0].childNodes[0].childNodes[1],c=b.nextSibling.nextSibling;a.span.innerHTML=a.label;a.i_sel=!1;a._aimgs&&this.dragger.removeDraggableItem(b.nextSibling);this.checkBoxOff?(b.childNodes[0].style.display="",b.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(b.childNodes[0],this.imPath+this.checkArray[a.checkstate])):b.childNodes[0].style.display="none";b.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(c);
this.dragAndDropOff&&this.dragger.addDraggableItem(c,this);this._aimgs&&this.dragger.addDraggableItem(b.nextSibling,this);c.childNodes[0].className="standartTreeRow";c.onclick=this.onRowSelect;c.ondblclick=this.onRowClick2;b.previousSibling.onclick=this.onRowClick;this._correctLine(a);this._correctPlus(a);for(var d=0;d<a.childsCount;d++)this._clearStyles(a.childNodes[d])}};
dhtmlXTreeObject.prototype._registerBranch=function(a,b){b&&b._globalIdStorageSub(a.id);a.id=this._globalIdStorageAdd(a.id,a);a.treeNod=this;for(var c=0;c<a.childsCount;c++)this._registerBranch(a.childNodes[c],b);return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(a){this.tscheck=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(a){this.ehlt=!0;this.attachEvent("onMouseIn",a)};
dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(a){this.ehlt=!0;this.attachEvent("onMouseOut",a)};dhtmlXTreeObject.prototype.enableTreeImages=function(a){this.timgen=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableFixedMode=function(a){this.hfMode=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(a,b){this.checkBoxOff=convertStringToBoolean(a);this.cBROf=!(this.checkBoxOff||convertStringToBoolean(b))};
dhtmlXTreeObject.prototype.setStdImages=function(a,b,c){this.imageArray[0]=a;this.imageArray[1]=b;this.imageArray[2]=c};dhtmlXTreeObject.prototype.enableTreeLines=function(a){this.treeLinesOn=convertStringToBoolean(a)};
dhtmlXTreeObject.prototype.setImageArrays=function(a,b,c,d,f,e){switch(a){case "plus":this.plusArray[0]=b;this.plusArray[1]=c;this.plusArray[2]=d;this.plusArray[3]=f;this.plusArray[4]=e;break;case "minus":this.minusArray[0]=b,this.minusArray[1]=c,this.minusArray[2]=d,this.minusArray[3]=f,this.minusArray[4]=e}};dhtmlXTreeObject.prototype.openItem=function(a){var b=this._globalIdStorageFind(a);return b?this._openItem(b):0};
dhtmlXTreeObject.prototype._openItem=function(a){var b=this._getOpenState(a);if(b<0||this.XMLsource&&!a.XMLload){if(!this.callEvent("onOpenStart",[a.id,b]))return 0;this._HideShow(a,2);if(this.checkEvent("onOpenEnd"))this.onXLE==this._epnFHe&&this._epnFHe(this,a.id,!0),!this.xmlstate||!this.XMLsource?this.callEvent("onOpenEnd",[a.id,this._getOpenState(a)]):(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe)}else this._srnd&&this._HideShow(a,2);a.parentObject&&!this._skip_open_parent&&this._openItem(a.parentObject)};
dhtmlXTreeObject.prototype.closeItem=function(a){if(this.rootId==a)return 0;var b=this._globalIdStorageFind(a);if(!b)return 0;b.closeble&&this._HideShow(b,1)};dhtmlXTreeObject.prototype.getLevel=function(a){var b=this._globalIdStorageFind(a);return!b?0:this._getNodeLevel(b,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(a,b){var b=convertStringToBoolean(b),c=a&&a.span?a:this._globalIdStorageFind(a);if(!c)return 0;c.closeble=b};
dhtmlXTreeObject.prototype._getNodeLevel=function(a,b){return a.parentObject?this._getNodeLevel(a.parentObject,b+1):b};dhtmlXTreeObject.prototype.hasChildren=function(a){var b=this._globalIdStorageFind(a);return b?this.XMLsource&&!b.XMLload?!0:b.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(a){for(var b=0,c=0;c<a.childsCount;c++)a.childNodes[c].childsCount==0&&b++;return b};
dhtmlXTreeObject.prototype.setItemText=function(a,b,c){var d=this._globalIdStorageFind(a);if(!d)return 0;d.label=b;d.span.innerHTML=b;d.span.parentNode.parentNode.title=c||""};dhtmlXTreeObject.prototype.getItemTooltip=function(a){var b=this._globalIdStorageFind(a);return!b?"":b.span.parentNode.parentNode._dhx_title||b.span.parentNode.parentNode.title||""};dhtmlXTreeObject.prototype.refreshItem=function(a){if(!a)a=this.rootId;var b=this._globalIdStorageFind(a);this.deleteChildItems(a);this._loadDynXML(a)};
dhtmlXTreeObject.prototype.setItemImage2=function(a,b,c,d){var f=this._globalIdStorageFind(a);if(!f)return 0;f.images[1]=c;f.images[2]=d;f.images[0]=b;this._correctPlus(f)};dhtmlXTreeObject.prototype.setItemImage=function(a,b,c){var d=this._globalIdStorageFind(a);if(!d)return 0;c?(d.images[1]=b,d.images[2]=c):d.images[0]=b;this._correctPlus(d)};
dhtmlXTreeObject.prototype.getSubItems=function(a){var b=this._globalIdStorageFind(a,0,1);if(!b)return 0;var c="";for(i=0;i<b.childsCount;i++)c?c+=this.dlmtr+b.childNodes[i].id:c=b.childNodes[i].id;return c};
dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){var d=a.childNodes[c].unParsed?this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1):this._getAllScraggyItems(a.childNodes[c]);d&&(b?b+=this.dlmtr+d:b=d)}else b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id;return b};
dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id;var d=a.childNodes[c].unParsed?this._getAllFatItemsXML(a.childNodes[c].unParsed,1):this._getAllFatItems(a.childNodes[c]);d&&(b+=this.dlmtr+d)}return b};
dhtmlXTreeObject.prototype._getAllSubItems=function(a,b,c){var d=c?c:this._globalIdStorageFind(a);if(!d)return 0;for(var b="",f=0;f<d.childsCount;f++){b?b+=this.dlmtr+d.childNodes[f].id:b=d.childNodes[f].id;var e=this._getAllSubItems(0,b,d.childNodes[f]);e&&(b+=this.dlmtr+e)}return b};
dhtmlXTreeObject.prototype.selectItem=function(a,b,c){var b=convertStringToBoolean(b),d=this._globalIdStorageFind(a);if(!d||!d.parentObject)return 0;this.XMLloadingWarning?d.parentObject.openMe=1:this._openItem(d.parentObject);var f=null;if(c&&(f={ctrlKey:!0},d.i_sel))f.skipUnSel=!0;if(b)this.onRowSelect(f,d.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1);else this.onRowSelect(f,d.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)};
dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var a=[],b=0;b<this._selected.length;b++)a[b]=this._selected[b].span.innerHTML;return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(a,b){a--;for(var c=0;c<a;c++)b[c]==0&&(b[c]=b[c+1],b[c+1]=0)};
dhtmlXTreeObject.prototype._deleteNode=function(a,b,c){if(!b||!b.parentObject)return 0;var d=0,f=0;if(b.tr.nextSibling)d=b.tr.nextSibling.nodem;if(b.tr.previousSibling)f=b.tr.previousSibling.nodem;for(var e=b.parentObject,g=e.childsCount,h=e.childNodes,j=0;j<g;j++)if(h[j].id==a){c||e.htmlNode.childNodes[0].removeChild(h[j].tr);h[j]=0;break}this._compressChildList(g,h);c||e.childsCount--;d&&(this._correctPlus(d),this._correctLine(d));f&&(this._correctPlus(f),this._correctLine(f));this.tscheck&&this._correctCheckStates(e);
c||this._globalIdStorageRecSub(b)};dhtmlXTreeObject.prototype.setCheck=function(a,b){var c=this._globalIdStorageFind(a,0,1);c&&(b==="unsure"?this._setCheck(c,b):(b=convertStringToBoolean(b),this.tscheck&&this.smcheck?this._setSubChecked(b,c):this._setCheck(c,b)),this.smcheck&&this._correctCheckStates(c.parentObject))};
dhtmlXTreeObject.prototype._setCheck=function(a,b){if(a){if((a.parentObject._r_logic||this._frbtr)&&b)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=a;else for(var c=0;c<a.parentObject.childsCount;c++)this._setCheck(a.parentObject.childNodes[c],0);var d=a.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];a.checkstate=b=="unsure"?2:b?1:0;if(a.dscheck)a.checkstate=a.dscheck;this._setSrc(d,this.imPath+(a.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[a.checkstate])}};
dhtmlXTreeObject.prototype.setSubChecked=function(a,b){var c=this._globalIdStorageFind(a);this._setSubChecked(b,c);this._correctCheckStates(c.parentObject)};
dhtmlXTreeObject.prototype._setSubChecked=function(a,b){a=convertStringToBoolean(a);if(b){if((b.parentObject._r_logic||this._frbtr)&&a)for(var c=0;c<b.parentObject.childsCount;c++)this._setSubChecked(0,b.parentObject.childNodes[c]);if(b._r_logic||this._frbtr)this._setSubChecked(a,b.childNodes[0]);else for(c=0;c<b.childsCount;c++)this._setSubChecked(a,b.childNodes[c]);var d=b.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];b.checkstate=a?1:0;if(b.dscheck)b.checkstate=b.dscheck;this._setSrc(d,
this.imPath+(b.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[b.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(a){var b=this._globalIdStorageFind(a);return!b?void 0:b.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(a){var b=this._globalIdStorageFind(a);if(b)for(var c=b.childsCount,d=0;d<c;d++)this._deleteNode(b.childNodes[0].id,b.childNodes[0])};
dhtmlXTreeObject.prototype.deleteItem=function(a,b){if(!this._onrdlh||this._onrdlh(a))var c=this._deleteItem(a,b);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};
dhtmlXTreeObject.prototype._deleteItem=function(a,b,c){var b=convertStringToBoolean(b),d=this._globalIdStorageFind(a);if(d){var f=this.getParentId(a),e=d.parentObject;this._deleteNode(a,d,c);if(this._editCell&&this._editCell.id==a)this._editCell=null;this._correctPlus(e);this._correctLine(e);b&&f!=this.rootId&&this.selectItem(f,1);return e}};
dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(a){for(var b=0;b<a.childsCount;b++)this._globalIdStorageRecSub(a.childNodes[b]),this._globalIdStorageSub(a.childNodes[b].id);this._globalIdStorageSub(a.id);var c=a;c.span=null;c.tr.nodem=null;c.tr=null;c.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(a,b,c,d,f,e,g,h,j){var i=this._globalIdStorageFind(a);if(!i||!i.parentObject)return 0;var m=this._attachChildNode(0,b,c,d,f,e,g,h,j,i);return m};
dhtmlXTreeObject.prototype.getItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(a,b){var c=this._globalIdStorageFind(a);return!c||b>=c.childsCount?null:c.childNodes[b].id};dhtmlXTreeObject.prototype.setDragHandler=function(a){this.attachEvent("onDrag",a)};
dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark)this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null;this.allTree.className=this.allTree.className.replace(" selectionBox","")};
dhtmlXTreeObject.prototype.enableDragAndDrop=function(a,b){a=="temporary_disabled"?(this.dADTempOff=!1,a=!0):this.dADTempOff=!0;(this.dragAndDropOff=convertStringToBoolean(a))&&this.dragger.addDragLanding(this.allTree,this);if(arguments.length>1)this._ddronr=!convertStringToBoolean(b)};
dhtmlXTreeObject.prototype._setMove=function(a){if(a.parentObject.span){var b=getAbsoluteTop(a),c=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;var d=a.parentObject.span;d.className+=" dragAndDropRow";this._lastMark=d;this._autoScroll(null,b,c)}};
dhtmlXTreeObject.prototype._autoScroll=function(a,b,c){if(this.autoScroll){a&&(b=getAbsoluteTop(a),c=getAbsoluteTop(this.allTree));if(b-c-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50)this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20;if(b-c<parseInt(this.allTree.scrollTop)+30)this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}};
dhtmlXTreeObject.prototype._createDragNode=function(a,b){if(!this.dADTempOff)return null;var c=a.parentObject;if(!this.callEvent("onBeforeDrag",[c.id,b]))return null;c.i_sel||this._selectItem(c,b);var d=document.createElement("div"),f=[];if(this._itim_dg)for(var e=0;e<this._selected.length;e++)f[e]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[e].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[e].span.innerHTML+
"</td></tr></table>";else f=this.getSelectedItemText().split(this.dlmtr);d.innerHTML=f.join("");d.style.position="absolute";d.className="dragSpanDiv";this._dragged=[].concat(this._selected);return d};dhtmlXTreeObject.prototype._focusNode=function(a){var b=getAbsoluteTop(a.htmlNode)-getAbsoluteTop(this.allTree);if(b>this.allTree.offsetHeight-30||b<0)this.allTree.scrollTop=b+this.allTree.scrollTop};dhtmlXTreeObject.prototype._preventNsDrag=function(a){a&&a.preventDefault&&a.preventDefault();return!1};
dhtmlXTreeObject.prototype._drag=function(a,b,c){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer);if(!c.parentObject)c=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0;this._clearMove();var d=a.parentObject.treeNod;d&&d._clearMove&&d._clearMove("");if(!this.dragMove||this.dragMove())for(var f=!d||!d._clearMove||!d._dragged?Array(a.parentObject):d._dragged,e=c.parentObject,g=0;g<f.length;g++){var h=this._moveNode(f[g],e);this.dadmodec&&h!==!1&&(e=
this._globalIdStorageFind(h,!0,!0));h&&!this._sADnD&&this.selectItem(h,0,1)}if(d)d._dragged=[]};
dhtmlXTreeObject.prototype._dragIn=function(a,b,c,d){if(!this.dADTempOff)return 0;var f=b.parentObject,e=a.parentObject;if(e||!this._ddronr){if(!this.callEvent("onDragIn",[f.id,e?e.id:null,f.treeNod,this]))return e&&this._autoScroll(a),0;if(e){if(f.childNodes==null)return this._setMove(a,c,d),a;for(var g=f.treeNod,h=0;h<g._dragged.length;h++)if(this._checkPNodes(e,g._dragged[h]))return this._autoScroll(a),0;this._setMove(a,c,d);if(this._getOpenState(e)<=0)this._autoOpenId=e.id,this._autoOpenTimer=
window.setTimeout(new callerFunction(this._autoOpenItem,this),1E3)}else this.allTree.className+=" selectionBox";return a}};dhtmlXTreeObject.prototype._autoOpenItem=function(a,b){b.openItem(b._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};
dhtmlXTreeObject.prototype.moveItem=function(a,b,c,d){var f=this._globalIdStorageFind(a);if(!f)return 0;switch(b){case "right":alert("Not supported yet");break;case "item_child":var e=(d||this)._globalIdStorageFind(c);if(!e)return 0;(d||this)._moveNodeTo(f,e,0);break;case "item_sibling":e=(d||this)._globalIdStorageFind(c);if(!e)return 0;(d||this)._moveNodeTo(f,e.parentObject,e);break;case "item_sibling_next":e=(d||this)._globalIdStorageFind(c);if(!e)return 0;e.tr&&e.tr.nextSibling&&e.tr.nextSibling.nodem?
(d||this)._moveNodeTo(f,e.parentObject,e.tr.nextSibling.nodem):(d||this)._moveNodeTo(f,e.parentObject);break;case "left":f.parentObject.parentObject&&this._moveNodeTo(f,f.parentObject.parentObject,f.parentObject);break;case "up":var g=this._getPrevNode(f);if(g==-1||!g.parentObject)return;this._moveNodeTo(f,g.parentObject,g);break;case "up_strict":g=this._getIndex(f);g!=0&&this._moveNodeTo(f,f.parentObject,f.parentObject.childNodes[g-1]);break;case "down_strict":var g=this._getIndex(f),h=f.parentObject.childsCount-
2;g==h?this._moveNodeTo(f,f.parentObject):g<h&&this._moveNodeTo(f,f.parentObject,f.parentObject.childNodes[g+2]);break;case "down":g=this._getNextNode(this._lastChild(f));if(g==-1||!g.parentObject)return;g.parentObject==f.parentObject&&(g=this._getNextNode(g));if(g==-1)this._moveNodeTo(f,f.parentObject);else{if(g==-1||!g.parentObject)return;this._moveNodeTo(f,g.parentObject,g)}}if(_isIE&&_isIE<8)this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"};
dhtmlXTreeObject.prototype._loadDynXML=function(a,b){var b=b||this.XMLsource,c=(new Date).valueOf();this._ld_id=a;this.loadXML(b+getUrlSymbol(b)+"uid="+c+"&id="+this._escape(a))};dhtmlXTreeObject.prototype._checkPNodes=function(a,b){return this._dcheckf?!1:b==a?1:a.parentObject?this._checkPNodes(a.parentObject,b):0};dhtmlXTreeObject.prototype.disableDropCheck=function(a){this._dcheckf=convertStringToBoolean(a)};
dhtmlXTreeObject.prototype.preventIECaching=function(a){this.no_cashe=convertStringToBoolean(a);this.XMLLoader.rSeed=this.no_cashe};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(a,b){var c=typeof a!="object"?this._globalIdStorageFind(a,0,1):a;if(c&&(c.dscheck=convertStringToBoolean(b)?(c.checkstate||0)%3+3:c.checkstate>2?c.checkstate-3:c.checkstate,this._setCheck(c),c.dscheck<3))c.dscheck=!1};
dhtmlXTreeObject.prototype.setEscapingMode=function(a){this.utfesc=a};dhtmlXTreeObject.prototype.enableHighlighting=function(a){this.ehlt=!0;this.ehlta=convertStringToBoolean(a)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b.callEvent("onMouseOut",[a.id]);if(a.id==b._l_onMSI)b._l_onMSI=null;if(b.ehlta)a.span.className=a.span.className.replace("_lor","")};
dhtmlXTreeObject.prototype._itemMouseIn=function(){var a=this.childNodes[3].parentObject,b=a.treeNod;b._l_onMSI!=a.id&&b.callEvent("onMouseIn",[a.id]);b._l_onMSI=a.id;if(b.ehlta)a.span.className=a.span.className.replace("_lor",""),a.span.className=a.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")};dhtmlXTreeObject.prototype.enableActiveImages=function(a){this._aimgs=convertStringToBoolean(a)};
dhtmlXTreeObject.prototype.focusItem=function(a){var b=this._globalIdStorageFind(a);if(!b)return 0;this._focusNode(b)};dhtmlXTreeObject.prototype.getAllSubItems=function(a){return this._getAllSubItems(a)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;
dhtmlXTreeObject.prototype._getAllScraggyItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){var d=a.childNodes[c].unParsed?this._getAllScraggyItemsXML(a.childNodes[c].unParsed,1):this._getAllScraggyItems(a.childNodes[c]);d&&(b?b+=this.dlmtr+d:b=d)}else b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id;return b};
dhtmlXTreeObject.prototype._getAllFatItems=function(a){for(var b="",c=0;c<a.childsCount;c++)if(a.childNodes[c].unParsed||a.childNodes[c].childsCount>0){b?b+=this.dlmtr+a.childNodes[c].id:b=a.childNodes[c].id;var d=a.childNodes[c].unParsed?this._getAllFatItemsXML(a.childNodes[c].unParsed,1):this._getAllFatItems(a.childNodes[c]);d&&(b+=this.dlmtr+d)}return b};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};
dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(a){a&&(a=this._globalIdStorageFind(a));return this._getAllChecked(a,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};
dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var a=[this._getAllChecked("","",1)],b=this._getAllChecked("","",2);b&&a.push(b);return a.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(a,b,c){if(!a)a=this.htmlNode;if(a.checkstate==c&&!a.nocheckbox)b?b+=this.dlmtr+a.id:b=a.id;for(var d=a.childsCount,f=0;f<d;f++)b=this._getAllChecked(a.childNodes[f],b,c);return b?b:""};
dhtmlXTreeObject.prototype.setItemStyle=function(a,b,c){var c=c||!1,d=this._globalIdStorageFind(a);if(!d)return 0;d.span.style.cssText?d.span.style.cssText=c?b:d.span.style.cssText+";"+b:d.span.setAttribute("style",d.span.getAttribute("style")+"; "+b)};dhtmlXTreeObject.prototype.enableImageDrag=function(a){this._itim_dg=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setOnDragIn=function(a){this.attachEvent("onDragIn",a)};
dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(a){this.autoScroll=convertStringToBoolean(a)};dhtmlXTreeObject.prototype.setSkin=function(a){var b=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=b+" dhxtree_"+a;a=="dhx_terrace"&&this.enableTreeLines(!1)};
(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(a){return[a.parent,a.width||"100%",a.height||"100%",a.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",
editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",
xml:"loadXML",skin:"setSkin"},{})})();
dhtmlXTreeObject.prototype._dp_init=function(a){a.attachEvent("insertCallback",function(a,c,d){var f=this._loader.doXPath(".//item",a),e=f[0].getAttribute("text");this.obj.insertNewItem(d,c,e,0,0,0,0,"CHILD")});a.attachEvent("updateCallback",function(a,c,d){var f=this._loader.doXPath(".//item",a),e=f[0].getAttribute("text");this.obj.setItemText(c,e);this.obj.getParentId(c)!=d&&this.obj.moveItem(c,"item_child",d);this.setUpdated(c,!0,"updated")});a.attachEvent("deleteCallback",function(a,c){this.obj.setUserData(c,
this.action_param,"true_deleted");this.obj.deleteItem(c,!1)});a._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(b,c){b==3&&a.setUpdated(c,!0);return!0});this.attachEvent("onDrop",function(b,c,d,f,e){f==e&&a.setUpdated(b,!0)});this._onrdlh=function(b){var c=a.getState(b);if(c=="inserted")return a.set_invalid(b,!1),a.setUpdated(b,!1),!0;if(c=="true_deleted")return a.setUpdated(b,!1),!0;a.setUpdated(b,!0,"deleted");return!1};this._onradh=function(b){a.setUpdated(b,
!0,"inserted")};a._getRowData=function(a){for(var c={},d=this.obj._globalIdStorageFind(a),f=d.parentObject,e=0,e=0;e<f.childsCount;e++)if(f.childNodes[e]==d)break;c.tr_id=d.id;c.tr_pid=f.id;c.tr_order=e;c.tr_text=d.span.innerHTML;f=(d._userdatalist||"").split(",");for(e=0;e<f.length;e++)c[f[e]]=d.userData["t_"+f[e]];return c}};

